<html>
<head>
<title>Introduction to the CLI: Customizing Your CLI Shell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>CLI简介:定制您的CLI Shell</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/blog/cli-shell#0001-01-01">https://www.gitkraken.com/blog/cli-shell#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p>点击下面阅读我们CLI简介系列的其他文章:</p>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>到目前为止，在本系列中，您已经了解了为什么理解如何使用命令行、一些命令行基础知识和<a href="https://www.gitkraken.com/blog/shell-commands" target="_blank" rel="noreferrer noopener"> shell命令</a>，以及所有关于运行基于CLI的应用程序和<a href="https://www.gitkraken.com/blog/command-line-tools" target="_blank" rel="noreferrer noopener">命令行工具</a>的重要性。在CLI简介系列的这一部分中，您将学习定制shell用户体验的基础知识。</p>



<p>在CLI简介系列的这一部分中，我们将重点关注:</p>







<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>定制您的CLI Shell </strong></h2>



<p>您可以完全控制CLI shell的外观。从改变提示变量到改变配色方案，再到制作自己的快捷方式，有很多方法可以配置用户体验。为了开始这条定制路线，让我们首先看看CLI shell配置一般是如何工作的。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>无论你如何定制你的终端体验，你都会爱上在GitKraken客户端使用GitKraken CLI！令人敬畏的提交图形可视化加上Git CLI触手可及。<br/></p>

</div>
</div>



<p aria-hidden="true" id="config-files" class="wp-block-spacer"/>



<h3>CLI Shell的配置文件</h3>



<p>像Zsh和Bash这样的CLI shells只是运行在操作系统之上的程序。就像任何其他程序一样，您可以根据自己的需要对它们进行配置。</p>



<p>Zsh和Bash都以特定的顺序从特定的文件中加载配置，但是我们将把重点放在Zsh的<code>.zshrc</code>或者Bash的<code>.bashrc</code>上。这两个文件都存储在您的$HOME文件夹中，如果您在没有其他选项的情况下执行<code>cd</code>，您将会到达这个文件夹。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>当您打开新的终端窗口时，终端模拟器会加载CLI shell的配置。您可以在终端中启动四种shell会话；最常见的是“交互式、非登录外壳”，您可能会每天使用它。</p>



<p>让我们快速仔细地看一下这四种可能的状态。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h4><strong>交互式外壳vs非交互式外壳</strong></h4>



<p>每次在终端中输入内容时，您都使用了交互式shell。这是终端打开的默认shell类型，如果你点击桌面上的某个东西或者在编辑器中打开内置的终端，比如VS Code。</p>



<p>非交互式shell由程序(如shell脚本)打开和使用，不接受用户从键盘输入。如果你曾经打开一个程序，短暂地瞥见一个终端窗口打开，打印一些东西，然后立即关闭，那么你已经看到了一个非交互的shell在工作。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h4><strong>登录与非登录Shell </strong></h4>



<p>在本系列关于<a href="https://www.gitkraken.com/blog/shell-commands" target="_blank" rel="noreferrer noopener"> shell命令</a>的第二部分中，我们看到的第一个命令是<code>whoami</code>。知道终端认为你是谁很重要，因为终端会根据这些信息做出不同的行为。<br/> <br/>打开终端模拟器时——像GitKraken客户端、iTerm或Gnome终端中的终端标签——操作系统已经知道你是谁，你就不用再登录了。终端为您提供一个交互式的非登录shell，并从您的<code>.zshrc</code>文件中加载配置。<br/> <br/>第一次打开SSH连接或原生CLI shell时，比如只有命令行的Linux会话，终端需要你登录。这时您将有一个交互式登录会话，shell将从您的<code>.zshprofile</code>加载配置。<br/> <br/>在本文中，我们将与<code>.zshrc</code>一起工作；这是因为您几乎总是在使用交互式非登录shell，但是了解shell的配置是从哪里加载的是有好处的，尤其是在您使用脚本和CI/CD工具时。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>在VS代码终端加载交互会话？GitLens+使该会话在另一个层面上具有交互性！单击以与shell中列出的任何Git散列、分支或标记进行交互。立即开始使用GitLens+。<br/></p>
<a href="https://www.gitkraken.com/gitlens/plus-features" class="button button--basic">Sign Up for GitLens+</a>
</div>
</div>



<p aria-hidden="true" id="customizing-the-prompt" class="wp-block-spacer"/>



<h3><strong>定制提示</strong></h3>



<p>您可以通过多种方式自定义命令提示符。到目前为止，我们展示的几乎所有示例中的默认提示配置都使用了模式:<code>username@hostname current-directory %</code>。</p>



<p><code>hostname</code>只是你登录的电脑的名称。要改变这一点，您需要更改“提示变量1”的值，在Zsh中称为<code>PROMPT</code>，在Bash中称为<code>PS1</code>。<br/> <br/>您可以设置提示变量来打印任何常规字符串或单个字符，如您的姓名、自定义消息或' $ '。有大量预定义的提示变量设置可供您选择来填充动态值，包括当前日期和时间、目录的完整路径、完整主机名和许多其他选项。虽然非常相似，<a href="https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html" target="_blank" rel="noreferrer noopener"> Zsh提示变量选项</a>在格式和细节上与<a href="https://www.gnu.org/software/bash/manual/html_node/Controlling-the-Prompt.html" target="_blank" rel="noreferrer noopener"> Bash提示变量选项</a>有所不同。<br/> <br/>例如，让我们将Zsh中的提示改为使用格式<code>date current-directory ~ $ </code></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="wp-block-image"><figure class="aligncenter size-full"><picture decoding="async" class="wp-image-7986">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM.png.webp 958w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20958%2076'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 958px) 100vw, 958px"/>
<img decoding="async" src="" alt="a prompt to use the format current-directory ~ $" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM.png 958w, https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM-300x24.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM-768x61.png 768w" data-lazy-sizes="(max-width: 958px) 100vw, 958px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-7986">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM.png.webp 958w" sizes="(max-width: 958px) 100vw, 958px"/>
<img decoding="async" src="../Images/21c3ed7094faae59162e99572c5a8c74.png" alt="a prompt to use the format current-directory ~ $" srcset="https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM.png 958w, https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM-300x24.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM-768x61.png 768w" sizes="(max-width: 958px) 100vw, 958px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2022/05/Screen-Shot-2022-05-23-at-4.47.45-PM.png"/>
</picture>
</noscript></figure></div>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>1.打开或创建您的<code>~/.zshrc</code>文件。它可能已经存在，但是如果没有，您可以使用<code>touch ~/.zshrc</code>或者通过您喜欢的文本编辑器来创建它。该文件将保存在您的$HOME目录中。<br/> <br/> 2。在<code>.zshrc</code>文件的顶部，添加下面一行:<br/> <br/> <code>export PROMPT='%D %1/ ~ $ </code> <br/> <br/>如果你正在使用Bash，你在你的<code>~/.bashrc</code>文件中设置这一行:<br/> <br/> <code>export PS1="\d \W ~ $"</code></p>



<p>3.保存文件。<br/> <br/> 4。打开一个新的终端窗口。<br/> <br/> 5。庆祝一下！</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h4><strong>给你的提示着色</strong></h4>



<p>您可以给Zsh提示变量添加一点颜色，使您的提示变量更容易阅读，匹配您的桌面背景，或者只是增加您的终端体验。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>默认情况下，Zsh支持黑色、红色、绿色、黄色、蓝色、青色和白色。<br/> <br/>要布置你的提示变量，完成以下步骤:<br/> <br/> 1 .打开您的<code>~/.zshrc</code>文件。</p>



<p>2.将<code>%F{color}</code>加到任何提示变量的前面，将<code>%f</code>加到另一边。用支持的颜色之一替换颜色。<br/> <br/>例如，要将你的提示修改成如上图的样子，使用:<br/> <br/> <code>export PROMPT='%F{red}%D%f %F{green}%1/%f %F{cyan}~%f %F{yellow}$%f</code> <br/> <br/> 3。保存文件。<br/> <br/> 4。打开一个新的终端窗口。</p>



<p aria-hidden="true" class="wp-block-spacer"><strong> Zsh主题</strong></p>



<h4>您可以在提示中添加更多的装饰，并创建完整的Zsh主题。虽然我们不打算在这里深入讨论创建Zsh主题，但是知道什么是可能的还是有好处的。</h4>



<p>有多个致力于CLI shell主题的开源项目，可以轻松地按照您想要的方式配置提示符。我们建议查看一下<a href="https://ohmyposh.dev/" target="_blank" rel="noreferrer noopener"> Oh My Posh </a>主题，这是一个适用于任何CLI shell的提示主题引擎。</p>



<p>有多个致力于CLI shell主题的开源项目，可以轻松地按照您想要的方式配置提示符。我们建议查看一下<a href="https://ohmyposh.dev/" target="_blank" rel="noreferrer noopener"> Oh My Posh </a>主题，这是一个适用于任何CLI shell的提示主题引擎。</p>



<p aria-hidden="true" class="wp-block-spacer">无论您如何设计您的shell体验，如果您正在使用VS代码，GitLens+可以释放Git的力量，使您的终端体验更加健壮。<br/></p>



<div class="callout">
<div class="callout-content">
<p>无论您如何设计您的shell体验，如果您正在使用VS代码，GitLens+可以释放Git的力量，使您的终端体验更加健壮。<br/></p>
<a href="https://www.gitkraken.com/gitlens/plus-features" class="button button--basic">Sign Up for GitLens+</a>
</div>
</div>



<p aria-hidden="true" id="aliases" class="wp-block-spacer"><strong>用别名制作自己的快捷方式</strong></p>



<h3>您可以在<code>.zshrc</code>文件中做的另一件事是设置别名。别名是您为简化常见任务而定义的快捷方式。别名的设置非常简单，从长远来看，可以节省您大量的输入。<br/> <br/>别名总是遵循同一个简单的公式:<br/> <br/> <code>alias command='other commands you want to run'</code> <br/> <br/>就是这样。<br/> <br/>比如，我们在这个系列中就用了很多<code>ls -a</code>。您可以通过在您的<code>.zshrc</code>文件中添加下面一行来将其缩短为<code>la</code>:<br/><br/><code>alias la='ls -a'</code><br/><br/>记住保存并启动一个新的终端窗口，以使配置更改生效。</h3>



<p>您可以在<code>.zshrc</code>文件中做的另一件事是设置别名。别名是您为简化常见任务而定义的快捷方式。别名的设置非常简单，从长远来看，可以节省您大量的输入。<br/> <br/>别名总是遵循同一个简单的公式:<br/> <br/> <code>alias command='other commands you want to run'</code> <br/> <br/>就是这样。<br/> <br/>比如，我们在这个系列中就用了很多<code>ls -a</code>。您可以通过在您的<code>.zshrc</code>文件中添加下面一行来将其缩短为<code>la</code>:<br/><br/><code>alias la='ls -a'</code><br/><br/>记住保存并启动一个新的终端窗口，以使配置更改生效。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer">我们推荐的另一个常见选项是在删除文件夹或文件时使用交互模式。要使这成为您的终端的默认行为，在您的<code>.zshrc</code>文件中添加下面一行:<br/> <br/> <code>alias rm='rm -i'</code></p>



<p>我们推荐的另一个常见选项是在删除文件夹或文件时使用交互模式。要使这成为您的终端的默认行为，在您的<code>.zshrc</code>文件中添加下面一行:<br/> <br/> <code>alias rm='rm -i'</code></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer">关于别名有一点需要注意:别名可以覆盖现有命令的行为，如上面的例子所示。这是因为<code>.zshrc</code>文件是终端在打开CLI shell的新实例时最后读取的内容之一；从该文件加载的任何内容都优先于任何默认行为。</p>



<p>终端假设您知道自己在做什么，所以在设置替身时要小心使用命令名。在使用它作为别名之前，看看是否有任何字符组合的手动输入不失为一个好主意。</p>



<p>您可能会发现最后一个有用的例子是<code>git push origin main</code>，大多数开发人员最终会输入很多很多次。如果您将<code>git push origin main</code>设置为CLI别名<code>gpom</code>，您可以避免每次执行此操作时键入16个字符！<br/> <br/>要使用<code>gpom</code>别名，将其添加到您的<code>.zshrc</code>文件中:<br/> <br/> <code>alias gpom='git push origin main'</code></p>



<p>使用别名还可以做很多事情，比如创建函数和后缀。有很多很棒的<a href="https://www.thorsten-hans.com/5-types-of-zsh-aliases" target="_blank" rel="noreferrer noopener">指南可以让你了解更多关于CLI别名</a>的知识。您会发现，从长远来看，您对CLI别名了解得越多，节省的时间就越多。</p>



<p>使用别名还可以做很多事情，比如创建函数和后缀。有很多很棒的<a href="https://www.thorsten-hans.com/5-types-of-zsh-aliases" target="_blank" rel="noreferrer noopener">指南可以让你了解更多关于CLI别名</a>的知识。您会发现，从长远来看，您对CLI别名了解得越多，节省的时间就越多。</p>



<p aria-hidden="true" id="comands-every-time" class="wp-block-spacer"><strong>每次新外壳打开时运行的命令</strong></p>



<h3>到目前为止，我们添加到<code>.zshrc</code>文件中的所有东西都是命令，包括导出自定义提示变量和设置CLI别名。配置文件按照列出的顺序从上到下运行命令。但是，如果每次打开一个新的shell时都想运行某些命令，可以将它们列在<code>.zshrc</code>或<code>.bashrc</code>文件中。<br/> <br/>例如，如果您想显示当前的工作目录并列出新shell打开的目录的内容，您可以添加以下内容:<br/> <br/> <code>pwd &amp;&amp; ls</code></h3>



<p>到目前为止，我们添加到<code>.zshrc</code>文件中的所有东西都是命令，包括导出自定义提示变量和设置CLI别名。配置文件按照列出的顺序从上到下运行命令。但是，如果每次打开一个新的shell时都想运行某些命令，可以将它们列在<code>.zshrc</code>或<code>.bashrc</code>文件中。<br/> <br/>例如，如果您想显示当前的工作目录并列出新shell打开的目录的内容，您可以添加以下内容:<br/> <br/> <code>pwd &amp;&amp; ls</code></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer">这里的<code>&amp;&amp;</code>是如何告诉CLI shell在同一行上运行两个命令。这等同于按顺序运行每个命令。</p>



<p>这里的<code>&amp;&amp;</code>是如何告诉CLI shell在同一行上运行两个命令。这等同于按顺序运行每个命令。</p>



<p aria-hidden="true" class="wp-block-spacer">定制您的终端体验可以帮助您提高工作效率。结合GitKraken CLI带来的有用特性，如自动完成建议，您将走上效率最大化的道路。<br/></p>



<div class="callout">
<div class="callout-content">
<p>定制您的终端体验可以帮助您提高工作效率。结合GitKraken CLI带来的有用特性，如自动完成建议，您将走上效率最大化的道路。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"><strong>准备好自动化</strong></p>



<h2>既然您已经定制了自己的CLI shell用户体验，并且掌握了创建自己的快捷方式的诀窍，那么您就可以开始编写脚本了，我们将在本CLI简介系列的下一部分中介绍脚本。我们将把到目前为止您所学的一切结合起来，构建您的第一个简单脚本，并介绍更高级的脚本逻辑。有了这些知识，您将准备好接受高级工作流程并处理CI/CD管道！</h2>



<p>既然您已经定制了自己的CLI shell用户体验，并且掌握了创建自己的快捷方式的诀窍，那么您就可以开始编写脚本了，我们将在本CLI简介系列的下一部分中介绍脚本。我们将把到目前为止您所学的一切结合起来，构建您的第一个简单脚本，并介绍更高级的脚本逻辑。有了这些知识，您将准备好接受高级工作流程并处理CI/CD管道！</p>
		</div>
				</div>    
</body>
</html>