<html>
<head>
<title>How to Migrate from SVN to Git</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何从SVN迁移到Git</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/blog/migrating-git-svn#0001-01-01">https://www.gitkraken.com/blog/migrating-git-svn#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p><em>文章更新于2022年1月</em></p>



<p>您当前的Subversion (SVN)版本控制系统不能满足您的开发团队的需求吗？也许你听说过Git，但是你在SVN根深蒂固，转换到一个新的版本控制系统似乎是一项艰巨的任务。不要害怕！当你拥有传奇的<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>的力量时，没有什么任务是无法完成的。</p>



<p>让我们来看看为什么应该考虑从SVN迁移到Git，以及如何最好地完成这项任务。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>超过90%的开发者都在使用Git。GitKraken Client将有助于减轻迁移到Git的压力，并使您和您的团队的入职过程更加容易。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer">Git的优势</p>



<h2><strong>流行度</strong>–Git是目前软件开发领域最广泛使用的版本控制系统。根据Stack Overflow 的<a href="https://insights.stackoverflow.com/survey/2021#technology-most-popular-technologies" target="_blank" rel="noopener"> 2021年开发者调查，全球近95%的专业开发者都在使用Git进行版本控制。这意味着在您的公司中采用Git不仅会让您进入业界首选的版本控制系统，而且还会减少新开发人员学习您的系统所需的时间。</a></h2>



<ol><li><strong>分布式版本控制</strong>–Git使用分布式方法进行版本控制，这与SVN的集中式方法形成了鲜明的对比。这意味着每个用户将存储库的完整版本克隆到他们的本地机器上，这在几个方面都是有利的。它消除了集中式存储库的单点故障，减少了日常操作的网络流量，并允许您的团队离线工作。</li><li><strong>规模和速度</strong>——可以说，迁移到Git的最大原因是分支和合并。创建一个分支是毫不费力的，并且是非常轻量级的，允许您的开发人员更快地工作和更容易地合并。<strong>T3】</strong></li><li>从SVN迁移到吉特</li></ol>



<p aria-hidden="true" class="wp-block-spacer">赞美北海巨妖！您已经决定继续进行从SVN到Git的迁移。那么，下一步是什么？规划总是一件好事，微软已经整理了一份全面的清单，列出了将您的团队迁移到Git时需要考虑的事项。</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><picture decoding="async" class="wp-image-3222">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1.png.webp 800w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20800%20270'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 800px) 100vw, 800px"/>
<img decoding="async" src="" alt="" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1.png 800w, https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1-300x101.png 300w, https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1-768x259.png 768w" data-lazy-sizes="(max-width: 800px) 100vw, 800px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-3222">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1.png.webp 800w" sizes="(max-width: 800px) 100vw, 800px"/>
<img decoding="async" src="../Images/4c28a6544980ab5d67424e6bde5c1fac.png" alt="" srcset="https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1.png 800w, https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1-300x101.png 300w, https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1-768x259.png 768w" sizes="(max-width: 800px) 100vw, 800px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2021/06/Git-vs-SVN-02-800x270-1.png"/>
</picture>
</noscript></figure></div>


<p aria-hidden="true" class="wp-block-spacer">一旦您完成了规划阶段，就到了真正开始迁移代码的时候了。迁移的复杂性取决于几个因素:您的SVN存储库的复杂性，您已经完成了多少次合并，以及您是否关心重新格式化您的SVN存储库的历史。</p>



<h2>重新格式化历史包括以下附加步骤:</h2>



<p>将提交用户名转换为名字和姓氏，以及电子邮件地址</p>



<p>移除一些额外的特定于SVN的元数据</p>



<p>将<code>svn:ignore</code>文件迁移到<code>.gitignore</code>文件</p>



<ul><li>将您的SVN标签转换为git标签</li><li>将所有SVN分支迁移到新的Git remote上</li><li>将<code>svn:ignore</code>文件迁移到<code>.gitignore</code>文件</li><li>如果你不关心保存上面的对象，继续进行下面的说明。如果您想迁移所有的历史数据，请跳到<a href="#import-and-preserve-history" data-type="internal" data-id="#import-and-preserve-history">导入和保存历史指令</a>。</li><li>Git SVN Clone</li></ul>



<p aria-hidden="true" class="wp-block-spacer">如果您不担心重新格式化您的SVN存储库中的历史，那么转换过程就变得容易多了！Git有一个内置的<code>git svn </code> <a href="https://git-scm.com/docs/git-svn" target="_blank" rel="noreferrer noopener">命令</a>，用于将一个SVN仓库克隆到一个新的Git仓库中。您只需运行:</p>



<p><code>git svn clone &lt;SVN_URL&gt; -T trunk -b branches -t tags </code></p>



<p aria-hidden="true" class="wp-block-spacer">喝点咖啡…</p>



<h2>这个过程可能需要一些时间，因为g it从您的SVN存储库中获取每个提交，并使用Git再次处理它。</h2>



<p>如果您不担心重新格式化您的SVN存储库中的历史，那么转换过程就变得容易多了！Git有一个内置的<code>git svn </code> <a href="https://git-scm.com/docs/git-svn" target="_blank" rel="noreferrer noopener">命令</a>，用于将一个SVN仓库克隆到一个新的Git仓库中。您只需运行:</p>



<p><code>git svn clone &lt;SVN_URL&gt; -T trunk -b branches -t tags </code></p>



<p>一旦命令完成，继续在<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>中打开这个repo，您应该会看到一个新转换的Git repo的漂亮图形。</p>





<p>此时，您可以跳到<a href="#set-up-your-new-git-remote" target="_blank" data-type="internal" data-id="#set-up-your-new-git-remote" rel="noreferrer noopener">设置您的新Git遥控器</a>，并且您就要完成了！</p>



<p aria-hidden="true" class="wp-block-spacer"/>





<p aria-hidden="true" class="wp-block-spacer">GitKraken Client使Git更加可视化和直观，使初学者和专家开发者的入门过程更加容易，并为您提供了在GUI或终端之间切换的灵活性。<br/></p>



<p>一旦命令完成，继续在<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>中打开这个repo，您应该会看到一个新转换的Git repo的漂亮图形。</p>



<p>带着历史和分支从SVN迁徙到Git</p>



<p aria-hidden="true" class="wp-block-spacer">进口由<code>git svn </code>做一个勇敢的工作；但是，还可以采取一些额外的步骤来执行更准确的导入，清理历史信息并对其进行重新格式化，使其看起来更像Git历史。</p>



<div class="callout">
<div class="callout-content">
<p>首先，我们来看作者信息。SVN使用用户名跟踪提交，而Git使用全名和电子邮件地址。您可以在SVN存储库的工作目录中运行以下bash命令，以输出您的SVN作者列表:</p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer">您现在需要编辑<code>author-transformed.txt</code>文件中的每个作者，以匹配Git作者信息所需的语法。</p>



<h2 id="import-and-preserve-history">例如:</h2>



<p><code>ryanp = ryanp &lt;ryanp&gt;</code></p>



<p>变成了:</p>



<pre class="wp-block-code"><code>svn log -q | awk -F '|' '/^r/ {sub("^ ", "", $2); sub(" $", "", $2); print $2" = "$2" &lt;"$2"&gt;"}' | sort -u &gt; authors-transform.txt</code></pre>



<p><code>ryanp = Ryan Pinkus &lt;ryanp@example.com&gt;</code></p>



<p>现在您已经准备好了作者列表，您可以使用<code>git svn</code>运行导入并指定<code>authors-transform.txt</code>。在CLI中将<code>authors-transform.txt</code>复制到一个新目录<code>C:/repo/temp</code>中，并将cd复制到该目录。</p>



<p><strong>注意</strong>:如果在这个命令完成后，您看到一个空白的Git存储库，那么您的SVN存储库中可能没有标准布局。尝试移除<br/> <code>--stdlayout</code>标志。</p>



<p>该命令会将SVN存储库克隆到repo目录的“temp”文件夹中的新Git存储库中。如果您在<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>中打开repo，您会看到提交现在是Git格式的。</p>



<p><code>ryanp = Ryan Pinkus &lt;ryanp@example.com&gt;</code></p>



<p>现在您已经准备好了作者列表，您可以使用<code>git svn</code>运行导入并指定<code>authors-transform.txt</code>。在CLI中将<code>authors-transform.txt</code>复制到一个新目录<code>C:/repo/temp</code>中，并将cd复制到该目录。</p>



<pre class="wp-block-code"><code>cd c:/repo/temp

git svn clone [SVN repo URL] --no-metadata --authors-file=authors-transform.txt --stdlayout your_project</code></pre>



<p>接下来，如果您正在使用一个文件的话，您将想要寻址到<code>svn:ignore</code>文件。您可以运行下面的命令将<code>svn:ignore</code>转换成一个<code>.gitignore</code>文件，并提交到您的新Git存储库中。</p>



<p>您现在应该在GitKraken客户端的WIP节点中看到<code>.gitignore</code>。继续将新的<code>.gitignore</code>提交到您的存储库中。</p>



<p aria-hidden="true" class="wp-block-spacer"/>





<p aria-hidden="true" class="wp-block-spacer"/>



<p>接下来，您需要将所有的SVN标签转换成合适的Git标签。为此，您可以运行以下命令:</p>



<pre class="wp-block-code"><code>cd c:/repo/temp/your-project

git svn show-ignore &gt; .gitignore</code></pre>



<p>你可以使用GitKraken客户端来检查你的图表，并确保所有的标签都正确显示。</p>



<p aria-hidden="true" class="wp-block-spacer">接下来，您需要为每个远程ref创建本地分支。您可以使用以下命令来完成此操作:</p>





<p aria-hidden="true" class="wp-block-spacer">同样，您可以使用GitKraken客户端查看您的所有分支，并清理您不再需要的任何分支。如果您仍然看到一个“主干”分支，请验证它是否指向与“主”相同的提交。在这篇<a href="/blog/gitkraken-git-tips-7" target="_blank" data-type="URL" data-id="/blog/gitkraken-git-tips-7" rel="noreferrer noopener"> GitKraken客户端提示文章</a>中，了解如何设置自定义默认分支名称——如“main”而不是“master”。</p>



<p>如果一切正常，您可以继续删除那个分支，因为您现在将使用“主”分支。右键单击左侧面板中的分支名称，然后选择“删除主干”。</p>



<pre class="wp-block-code"><code>for t in $(git for-each-ref --format='%(refname:short)' refs/remotes/tags); do git tag ${t/tags\//} $t &amp;&amp; git branch -D -r $t; done</code></pre>



<p>你可以使用GitKraken客户端来检查你的图表，并确保所有的标签都正确显示。</p>



<p>接下来，您需要为每个远程ref创建本地分支。您可以使用以下命令来完成此操作:</p>



<pre class="wp-block-code"><code>for b in $(git for-each-ref --format='%(refname:short)' refs/remotes); do git branch $b refs/remotes/$b &amp;&amp; git branch -D -r $b; done</code></pre>



<p>此时，您的本地回购应该已经准备就绪；因此，您可以创建您的遥控器，并将回购推送到您的本地回购。</p>



<p>设置您的新Git遥控器</p>



<p aria-hidden="true" class="wp-block-spacer">在本例中，我们将使用<a href="https://www.gitkraken.com/integrations/github" target="_blank" rel="noreferrer noopener"> GitHub </a>向您展示如何创建远程，但GitKraken还集成了托管和自托管版本的<a href="https://www.gitkraken.com/integrations/gitlab" target="_blank" rel="noreferrer noopener"> GitLab </a>、<a href="https://www.gitkraken.com/integrations/bitbucket" target="_blank" rel="noreferrer noopener"> Bitbucket </a>和<a href="https://www.gitkraken.com/integrations/azure-devops" target="_blank" rel="noreferrer noopener"> Azure DevOps </a>，使从任何这些服务添加远程回购变得快速而简单。好的，现在回到例子…</p>





<p aria-hidden="true" class="wp-block-spacer">取消选中<kbd>Clone after init</kbd>选项，仅创建远程存储库。</p>



<p>此时，您的本地回购应该已经准备就绪；因此，您可以创建您的遥控器，并将回购推送到您的本地回购。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2 id="set-up-your-new-git-remote">您将需要新的远程回购的URL，因此单击<kbd>View on GitHub.com</kbd>按钮。</h2>



<p>在本例中，我们将使用<a href="https://www.gitkraken.com/integrations/github" target="_blank" rel="noreferrer noopener"> GitHub </a>向您展示如何创建远程，但GitKraken还集成了托管和自托管版本的<a href="https://www.gitkraken.com/integrations/gitlab" target="_blank" rel="noreferrer noopener"> GitLab </a>、<a href="https://www.gitkraken.com/integrations/bitbucket" target="_blank" rel="noreferrer noopener"> Bitbucket </a>和<a href="https://www.gitkraken.com/integrations/azure-devops" target="_blank" rel="noreferrer noopener"> Azure DevOps </a>，使从任何这些服务添加远程回购变得快速而简单。好的，现在回到例子…</p>



<p>将URL复制到repo，并在GitKraken客户端中返回到您的本地repo。</p>



<p aria-hidden="true" class="wp-block-spacer">点击左侧面板远程部分的<kbd>+</kbd>图标。</p>





<p aria-hidden="true" class="wp-block-spacer"/>



<p>您将需要新的远程回购的URL，因此单击<kbd>View on GitHub.com</kbd>按钮。</p>





<p aria-hidden="true" class="wp-block-spacer">在URL选项卡上，命名您的新遥控器，将repo的URL粘贴到Pull和Push URL字段中，然后单击<kbd>Add Remote</kbd>。</p>



<p>将URL复制到repo，并在GitKraken客户端中返回到您的本地repo。</p>



<p>点击左侧面板远程部分的<kbd>+</kbd>图标。</p>



<p aria-hidden="true" class="wp-block-spacer">现在，您可以右键单击每个分支和标签，将它们推送到您的遥控器上。</p>





<p aria-hidden="true" class="wp-block-spacer"/>



<p>如果您有大量的分支或标签，那么您可以使用下面的命令将它们推送到您的遥控器。</p>



<p aria-hidden="true" class="wp-block-spacer"/>





<p aria-hidden="true" class="wp-block-spacer">恭喜🎉您到Git的迁移已经完成！</p>



<p>您现在应该有一个正常工作的Git repo了。如果您准备好帮助您的组织扩展Git，请查看我们的<a href="https://www.gitkraken.com/git-client/resources" target="_blank" rel="noreferrer noopener"> GitKraken客户端资源</a>，包括迁移技巧和入门材料。</p>





<p aria-hidden="true" class="wp-block-spacer"/>



<p>数百万开发者已经依靠GitKraken Client成功地过渡和扩展了Git，那么为什么不加入北海巨妖的大家庭，免费试用今天最流行的Git工具呢？！<br/></p>



<pre class="wp-block-code"><code>git push origin --all
git push origin --tags</code></pre>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>恭喜🎉您到Git的迁移已经完成！</h2>



<p>您现在应该有一个正常工作的Git repo了。如果您准备好帮助您的组织扩展Git，请查看我们的<a href="https://www.gitkraken.com/git-client/resources" target="_blank" rel="noreferrer noopener"> GitKraken客户端资源</a>，包括迁移技巧和入门材料。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>数百万开发者已经依靠GitKraken Client成功地过渡和扩展了Git，那么为什么不加入北海巨妖的大家庭，免费试用今天最流行的Git工具呢？！<br/></p>

</div>
</div>



<p/>
		</div>
				</div>    
</body>
</html>