<html>
<head>
<title>GitHub Actions for Azure | Automation for Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>GitHub Actions for Azure |自动化for Azure</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/blog/github-actions-for-azure#0001-01-01">https://www.gitkraken.com/blog/github-actions-for-azure#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p class="has-small-font-size">这篇文章是由客座作者Nahla Davies写的。Nahla自2010年以来一直在软件领域工作，自2019年以来一直是一名技术作家。她曾在一家拥有5000家公司的体验式品牌机构担任首席程序员，该机构的客户包括三星、时代华纳、网飞和索尼。</p>



<p>Microsoft Azure在开发人员和组织中广受欢迎，因为它具有可伸缩性、灵活性和可定制性。微软没有与之对抗，而是通过提供一种新的方式来自动化开发和部署Azure的GitHub Actions，拥抱开源运动。</p>



<p>GitHub Actions是一个工具，允许团队自动化软件开发工作流，与Azure管道和您的定制需求一起工作。开发人员可以在他们的存储库中创建工作流，从GitHub到Azure构建、测试、打包、发布和部署任何项目，而无需手动输入。这个过程有助于使开发和交付更加智能和高效，以便您的团队可以专注于开发优秀的代码，而不是处理重复的手动任务。</p>



<p>GitHub Actions还能做什么？具体是怎么运作的？本指南将回答这些问题以及更多问题。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>GitHub操作的核心元素</h2>



<p>在开始使用GitHub Actions for Azure之前，尤其是如果你不熟悉<a href="https://www.waveapps.com/freelancing/full-stack-web-developer-portfolio" target="_blank" rel="noreferrer noopener">后端工作流自动化</a>，你应该熟悉以下GitHub Actions语法。</p>



<ul>
<li>工作流程</li>



<li>事件</li>



<li>乔布斯</li>



<li>行动</li>



<li>滑行装置</li>
</ul>



<p aria-hidden="true" class="wp-block-spacer">让我们更深入地了解一下这些元素的含义。</p>



<p>工作流程</p>



<p aria-hidden="true" class="wp-block-spacer">工作流是运行一个或多个作业以简化测试、开发和交付的自定义自动化流程。它们是由存储库中的YAML文件定义的，只要被事件触发，这些文件就会运行。这些触发器可以是自动事件，也可以是手动触发器，甚至可以按照循环计划来定义。</p>



<h3>每个存储库可以有多个工作流，为您的团队执行各种任务。一个工作流可以帮助构建和测试pull请求，另一个工作流可以在用户打开新问题时添加标签，而另一个工作流可以用于在发布自动可用时部署应用程序。</h3>



<p>事件</p>



<p>当谈到Azure 中的<a href="https://learn.microsoft.com/en-us/azure/developer/github/github-actions" target="_blank" rel="noreferrer noopener"> GitHub动作时，事件就是触发工作流运行的东西。事件可以是您在存储库中指定的任何活动，用于触发工作流中的一组作业。当您选择的一个事件发生时，您触发的活动将根据您的独特配置来自GitHub。</a></p>



<p aria-hidden="true" class="wp-block-spacer">有数不清的事件可以用来执行重要的工作流，例如当用户打开一个问题、创建一个新的“拉”请求或向存储库提交一个提交时。事件也可以是时间表的形式。当达到某个日期、时间或发展里程碑时，您计划的工作流将运行。</p>



<h3>滑行装置</h3>



<p>在我们深入讨论之前，讨论跑步者是很重要的。运行程序是运行触发的工作流的服务器，每个运行程序一次只运行一个作业。GitHub为Azure提供了runners，这样每个工作流都在一个干净的虚拟机中运行。</p>



<p>对于更复杂的配置，您可以利用GitHub提供的更大的<a href="https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners" target="_blank" rel="noreferrer noopener">滑道。或者，您也可以托管自己的跑步者来创建自定义配置。Runners有点超出了本文的范围，但是它们在运行GitHub动作中起着至关重要的作用。</a></p>



<p aria-hidden="true" class="wp-block-spacer">乔布斯</p>



<h3>作业是指在同一运行器上执行的工作流中的步骤。每个作业描述一个要执行的shell脚本或一个在事件触发工作流时运行的操作。一旦事件通知工作流开始，它将根据您的配置开始运行每个作业。换句话说，每一步都依赖于另一步，因此它们将按照依赖关系的顺序执行。</h3>



<p>默认情况下，作业并行运行，因此您必须配置每个作业的依赖关系，以便在正确的时间执行操作。例如，假设您正在处理多个没有依赖关系的构建作业。这些作业将同时并行运行。但是，如果您有一个依赖于构建作业的打包作业，它将在其依赖项完成时运行。</p>



<p>行动</p>



<p aria-hidden="true" class="wp-block-spacer">现在，我们来谈谈行动。GitHub Actions是帮助开发团队执行频繁重复任务的定制应用程序。与其他常见的工作流自动化不同，GitHub动作可以执行复杂的任务，以简化您的构建和部署过程。您可以为定制的体验编写自己的操作，也可以从GitHub Marketplace中选择操作。</p>



<h3>对于Azure环境，操作可以做的事情有许多种可能性。例如，您可以使用Actions从GitHub获取git库，或者为您独特的构建环境建立最佳工具链。您甚至可以使用GitHub操作进行管理，比如为您的云提供商设置认证协议。</h3>



<p>为Azure使用GitHub操作</p>



<p>现在你已经知道了GitHub动作的基础，让我们讨论一下如何在Azure中有效地使用它。当谈到Azure的操作时，你只受到项目需求的限制。您的团队可以通过多种方式利用Azure环境中的自动化操作。</p>



<p aria-hidden="true" class="wp-block-spacer">让我们来看看GitHub Actions与Azure配合使用的几种方式:</p>



<h3>Actions</h3>



<p>连接GitHub Actions和Azure</p>



<p>将GitHub Actions连接到Azure所要做的就是使用一个服务主体。或者，您可以发布一个配置文件，通过GitHub连接到Azure。每次使用Azure登录操作时，您都必须使用服务主体，但是您可以将它用于Azure的大多数操作，以简化您的任务。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>从Azure到GitHub进行身份验证</h2>



<p>您还可以使用PowerShell 和CLI的<a href="https://www.sqlshack.com/different-ways-to-login-to-azure-automation-using-powershell/" target="_blank" rel="noreferrer noopener"> Azure登录，在GitHub操作工作流中与您的Azure资源进行交互。有两种不同的方法可供选择。您可以通过带有秘密的服务主体或OpenID Connect进行身份验证。</a></p>



<p>让我们来看看GitHub Actions与Azure配合使用的几种方式:</p>



<p aria-hidden="true" class="wp-block-spacer">将应用从GitHub部署到Azure</p>



<h3>通过应用服务部署中心，可以很容易地将应用从GitHub部署到Azure。这种方法将根据您的sack自动生成一个工作流，并将其正确地提交到您的存储库中。或者，您可以使用手动工作流将应用程序从GitHub部署到Azure。</h3>



<p>将GitHub Actions连接到Azure所要做的就是使用一个服务主体。或者，您可以发布一个配置文件，通过GitHub连接到Azure。每次使用Azure登录操作时，您都必须使用服务主体，但是您可以将它用于Azure的大多数操作，以简化您的任务。</p>



<p aria-hidden="true" class="wp-block-spacer">将数据库从GitHub部署到Azure</p>



<h3>你也可以将数据库从GitHub部署到Azure。可以使用操作将数据库部署到Azure SQL、Azure MySQL和Azure Database for PostgreSQL。每个数据库都有自己的部署方法和操作，使部署过程变得快速而简单。</h3>



<p>您还可以使用PowerShell 和CLI的<a href="https://www.sqlshack.com/different-ways-to-login-to-azure-automation-using-powershell/" target="_blank" rel="noreferrer noopener"> Azure登录，在GitHub操作工作流中与您的Azure资源进行交互。有两种不同的方法可供选择。您可以通过带有秘密的服务主体或OpenID Connect进行身份验证。</a></p>



<p aria-hidden="true" class="wp-block-spacer">对GitHub操作使用变量替换</p>



<h3>变量替换操作可用于替换配置和参数文件中的值。例如，您可以使用这些操作在工作流运行期间将类似于<a href="https://www.gitkraken.com/media/events/azure-spring-clean-2022" target="_blank" rel="noreferrer noopener"> GitHub secrets </a>的值插入到文件中。只要变量被定义为环境变量或者以其他方式可用，变量替换操作就可以在Azure上运行。</h3>



<p>通过应用服务部署中心，可以很容易地将应用从GitHub部署到Azure。这种方法将根据您的sack自动生成一个工作流，并将其正确地提交到您的存储库中。或者，您可以使用手动工作流将应用程序从GitHub部署到Azure。</p>



<p aria-hidden="true" class="wp-block-spacer">使用GitHub管理Azure策略</p>



<h3>GitHub Actions也为团队提供了各种管理Azure策略的方法。例如，您可以使用GitHub操作从Azure导出Azure策略，通过GitHub将Azure策略作为代码进行管理，甚至触发Azure合规操作来简化开发生命周期的每个阶段。</h3>



<p>你也可以将数据库从GitHub部署到Azure。可以使用操作将数据库部署到Azure SQL、Azure MySQL和Azure Database for PostgreSQL。每个数据库都有自己的部署方法和操作，使部署过程变得快速而简单。</p>



<p aria-hidden="true" class="wp-block-spacer">使用GitHub Actions和Azure构建自定义虚拟机映像</p>



<h3>如果你想要一个真正定制的体验，你可以创建一个工作流来使用GitHub Actions for Azure构建一个虚拟机镜像。为了加快CI/CD流程，您可以使用工作流中的工件创建自定义虚拟机映像，这些工件可以分发到共享映像库中。</h3>



<p>变量替换操作可用于替换配置和参数文件中的值。例如，您可以使用这些操作在工作流运行期间将类似于<a href="https://www.gitkraken.com/media/events/azure-spring-clean-2022" target="_blank" rel="noreferrer noopener"> GitHub secrets </a>的值插入到文件中。只要变量被定义为环境变量或者以其他方式可用，变量替换操作就可以在Azure上运行。</p>



<p aria-hidden="true" class="wp-block-spacer">如何用GitHub动作定制你的Azure工作流</p>



<h3>使用GitHub Actions for Azure的好处之一是工作流的可能性几乎是无限的。您可以查看GitHub Marketplace，找到要添加到工作流中的操作，使用存储库中的操作，或者引用Docker Hub上的容器。</h3>



<p>以下是如何<a href="https://docs.github.com/en/actions/learn-github-actions/finding-and-customizing-actions" target="_blank" rel="noreferrer noopener">找到并定制</a>动作:</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h3>从GitHub Marketplace添加操作</h3>



<p>如果你刚刚开始使用GitHub Actions for Azure，你的第一站应该是GitHub Marketplace。在工作流编辑器中工作时，导航到边栏以查找新操作。您可以搜索特定操作或浏览特色操作和类别。您还会看到一个星级，以便您可以只找到要添加到Azure工作流中的最佳操作。</p>



<p aria-hidden="true" class="wp-block-spacer">向存储库添加操作</p>



<h2>如果您的存储库中已经有了一组操作，您可以简单地将操作添加到您在工作流编辑器中正在处理的任何内容中。你所要做的就是用这些语法路径之一来引用这个动作:‌ <code>{owner}/{repo}@{ref}</code>或<code>./path/to/dir</code>。</h2>



<p>如果您想要的动作是在工作流文件之外的公共存储库中定义的，请使用以下语法引用该动作:<code>{owner}/{repo}@{ref}</code>。</p>



<p>以下是如何<a href="https://docs.github.com/en/actions/learn-github-actions/finding-and-customizing-actions" target="_blank" rel="noreferrer noopener">找到并定制</a>动作:</p>



<p aria-hidden="true" class="wp-block-spacer">引用Docker Hub上的容器</p>



<h3>最后，您还可以<a href="https://www.gitkraken.com/gitkon/aws-cdk-github-actions-ci-cd-deployment" target="_blank" rel="noreferrer noopener">添加一个容器动作</a>到您的工作流中。如果您在发布到Docker Hub的Docker容器映像中定义了一个动作，您应该使用以下语法引用该动作:<code>docker://{image}:{tag}</code>。</h3>



<p>但是，在将任何操作引用到工作流文件之前，请确保在将代码引入到您的环境中之前验证代码是安全的。</p>



<p aria-hidden="true" class="wp-block-spacer">将你的知识付诸行动</p>



<h3>现在你已经有了一个关于GitHub Actions for Azure的速成班，是时候把它付诸实践了。您的团队有许多方法可以使用行动来加速开发和交付过程。首先看看我们在文章中提到的GitHub Actions对Azure的一些使用；然后，您可以开始定制自己的操作和工作流，以获得量身定制的Azure体验。</h3>



<p>如果您的存储库中已经有了一组操作，您可以简单地将操作添加到您在工作流编辑器中正在处理的任何内容中。你所要做的就是用这些语法路径之一来引用这个动作:‌ <code>{owner}/{repo}@{ref}</code>或<code>./path/to/dir</code>。</p>



<p>如果您想要的动作是在工作流文件之外的公共存储库中定义的，请使用以下语法引用该动作:<code>{owner}/{repo}@{ref}</code>。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h3>引用Docker Hub上的容器</h3>



<p>最后，您还可以<a href="https://www.gitkraken.com/gitkon/aws-cdk-github-actions-ci-cd-deployment" target="_blank" rel="noreferrer noopener">添加一个容器动作</a>到您的工作流中。如果您在发布到Docker Hub的Docker容器映像中定义了一个动作，您应该使用以下语法引用该动作:<code>docker://{image}:{tag}</code>。</p>



<p>但是，在将任何操作引用到工作流文件之前，请确保在将代码引入到您的环境中之前验证代码是安全的。</p>



<p aria-hidden="true" class="wp-block-spacer">将你的知识付诸行动</p>



<h2>现在你已经有了一个关于GitHub Actions for Azure的速成班，是时候把它付诸实践了。您的团队有许多方法可以使用行动来加速开发和交付过程。首先看看我们在文章中提到的GitHub Actions对Azure的一些使用；然后，您可以开始定制自己的操作和工作流，以获得量身定制的Azure体验。</h2>



<p>Now that you’ve had a crash course on GitHub Actions for Azure, it’s time to put it into practice. There are many ways that your teams can use Actions to speed up development and delivery processes. Start by checking out some of the uses for GitHub Actions for Azure we mentioned here in the article; then, you can start customizing your own actions and workflows for a tailor-made Azure experience. </p>
		</div>
				</div>    
</body>
</html>