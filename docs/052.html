<html>
<head>
<title>Migrating from Perforce to Git</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>从Perforce迁移到Git</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/blog/migrating-perforce-git#0001-01-01">https://www.gitkraken.com/blog/migrating-perforce-git#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p>源代码控制，也称为版本控制，是跟踪和管理软件代码变更的方法。源代码控制管理(SCM)系统提供了代码变更的运行历史，对于对相同文件进行变更的开发团队特别有帮助。</p>



<p>作为负责任的软件开发的一个重要方面，源代码控制帮助开发人员跟踪代码变更，查看完整的修订历史，并在需要时恢复到项目的先前版本。此外，版本控制使协作变得更加容易。</p>



<p>但不是所有的SCMs都是一样的；它们有自己的一套相关的好处和限制。当你得知GitKraken的团队中充满了痴迷于Git的开发人员时，你应该不会感到惊讶，因此我们提倡使用<a href="https://git-scm.com/" target="_blank" rel="noopener"> Git </a>，一个开源的分布式版本控制系统(VCS)。</p>



<p>我们之前已经写过从SVN迁移到Git的文章，现在我们要面对的是T2的Perforce，一个受游戏开发者和大公司欢迎的集中的VCS。</p>



<p aria-hidden="true" class="wp-block-spacer">Git与Perforce比较</p>



<h2>Perforce于1995年由Perforce软件公司前首席执行官Christopher Seiwald发布。整整十年后的2005年，Linux之父Linus Torvalds创建了Git。虽然这两个系统都是为了完成跟踪代码变更的庞大任务而引入的，但是它们在结构和功能上的显著差异是显而易见的。</h2>



<p>Perforce和Git处理软件项目的方式有根本的区别。Perforce存储库可以保存成百上千个单独的软件项目，每个项目都有不同的分支模型，而Git存储库保存单个软件项目。</p>



<p>Perforce和Git处理软件项目的方式有根本的区别。Perforce存储库可以保存成百上千个单独的软件项目，每个项目都有不同的分支模型，而Git存储库保存单个软件项目。</p>



<p aria-hidden="true" class="wp-block-spacer">迁移到Git的理由</p>



<h2>有很多原因可以解释为什么一个开发人员或团队会试图将他们的版本控制系统从Perforce转换到Git。</h2>



<p>首先，Git在跟踪代码变更方面做得更好，这是SCM的主要目的。Git的方法更有用，因为它跟踪文件中的内容，而不仅仅是文件本身，更准确地反映了代码中的实际变化。</p>



<p>速度</p>



<p aria-hidden="true" class="wp-block-spacer">Perforce需要连接到服务器才能查看代码更改的历史记录。这不仅会减慢速度，而且随着每个新开发人员尝试访问服务器，情况会变得更糟，导致严重的瓶颈和部署软件项目的延迟。</p>



<h3>相比之下，使用Git，您可以在几秒钟内访问整个项目历史。在Git环境中，每个开发人员在他们的本地机器上都有一份代码副本。这消除了在工作流程中连接到集中式代码库的需求。</h3>



<p>工作流灵活性</p>





<p>Git更灵活的权限系统允许您的团队有更大的工作流可能性。例如，在Perforce中，您可能已经限制了分支的创建，这就要求开发人员在每次想要创建任务分支时都要请求许可。</p>



<p aria-hidden="true" class="wp-block-spacer">在Git中，您可以只限制对主分支的推送访问，因此开发人员只需要在准备将代码实现到项目中时获得许可，而不是每次坐在计算机前时。</p>



<h3>分支</h3>



<p>在Perforce中，开发人员需要创建分支映射，这是Git中不需要的任务。这不仅需要开发人员花费时间和精力来做其他事情，而且还会扰乱原本高效的工作流，并产生不必要的数据。</p>



<p>Perforce中的分支创建了数量惊人的元数据；这可能会导致大型部署的性能问题。相比之下，使用Git，您可以有100个工作分支，但是只有一个实际存在于您的项目中的分支占用空间。而且，如果您想同时处理两个版本来比较结果，您可以克隆分支，执行一些代码更改，然后删除克隆而不会丢失任何东西。<br/> <br/> <em>了解更多关于Git分支和<a href="https://support.gitkraken.com/start-here/guide/#branching" target="_blank" rel="noreferrer noopener">Git kraken</a>中分支是如何工作的。</em></p>



<p aria-hidden="true" class="wp-block-spacer">最终，Perforce分支对于大多数开发人员喜欢的工作流类型来说并不方便，并且最终不会产生经理和产品所有者期望的结果。</p>



<h3>合并和解决冲突</h3>



<p>Perforce的合并算法过于复杂，而Git中合并的结果实际上是一个新的提交，包含所有的祖先数据。</p>



<p>许多Perforce用户抱怨该工具内置的自动解析功能的准确性，声称“<a href="https://www.clearvision-cm.com/blog/git-vs-perforce-helix-whats-the-difference/" target="_blank" rel="noreferrer noopener">已经有过工作被破坏的报道</a>”Git在合并冲突方面做得非常好。当提示您Git中存在冲突时，冲突实际上是存在的，而在其他时间，Git会解决冲突，纠正并节省大量时间。</p>



<p><em>看看为什么用户喜欢使用GitKraken 解决Git中的合并冲突。</em></p>



<p aria-hidden="true" class="wp-block-spacer">Git为各种新的工作流开辟了可能性，如<a href="/blog/gitflow" target="_blank" data-type="URL" data-id="/blog/gitflow" rel="noreferrer noopener"> Gitflow </a>、任务分支、分叉库等等。冒险在等着我们！</p>



<h3>合作</h3>



<p>从根本上说，作为源代码控制管理工具，Git和Perforce都是基于协作的。它们的功能是允许一组开发人员处理一组共享的文件。协作是Git真正将Perforce从数字水域中剔除的一个点。</p>



<p>在Perforce中，您可以在团队之间共享文件，但是接收团队必须使用手动过程将他们想要实现的相关代码更改分离到他们的项目中。在Perforce中，分解文件提交是不可能的。</p>



<p>另一方面，在Git中，一个团队可以<a href="https://support.gitkraken.com/working-with-commits/cherrypick/" target="_blank" rel="noreferrer noopener">精选</a>另一个团队的变更，并分离出他们想要保留的代码变更，而不必担心引入不需要的代码或部分实现的特性。</p>



<p>Perforce的数据模型认为软件历史是单个服务器独有的，而Git有能力在任何地方克隆和共享历史。这使得跨公司边界使用Git进行协作成为可能，这是跨功能开发环境越来越普遍的需求。</p>





<p aria-hidden="true" class="wp-block-spacer">团队入职</p>



<h3>简单地说，每个人都在做这件事。根据<a href="https://codingsans.com/state-of-software-development-2019" target="_blank" rel="noreferrer noopener">2019 Coding Sans State of Software Development报告</a>，90%使用版本控制的dev选择Git。如果你是一名招聘经理，你可以假设任何在过去五到十年中学习了他们的行业的工程师不仅已经知道如何使用Git，而且<em>会希望</em>使用Git。</h3>



<p>Git伴随着开源社区的热情和敏捷而来，并且正在快速发展以解决现实世界的问题(比如针对大文件存储的Git LFS的引入)。此外，任何开发人员都可以为项目贡献代码来改进某个特性或修复某个bug。</p>



<p><em>了解更多关于<a href="https://support.gitkraken.com/git-workflows-and-extensions/intro-and-requirements/" target="_blank" data-type="URL" data-id="https://support.gitkraken.com/git-workflows-and-extensions/intro-and-requirements/" rel="noreferrer noopener"> Git LFS </a>以及GitKraken如何支持大文件存储的信息。</em></p>



<p>费用</p>



<p>这一点会很快。Git是免费的。就像完全免费一样，在任何时候，不管有多少人在一个项目上工作，也不管你的Git repos包含多少数据。</p>



<p aria-hidden="true" class="wp-block-spacer">与之形成鲜明对比的是，据报道，Perforce的每位用户费用为数百美元，最近的估计为800美元。Perforce不再公布价格…这就足够了。当需要购买硬件时，大型团队的成本会变得更加昂贵。</p>



<h3>Team Onboarding</h3>



<p>执行强制到Git的迁移</p>



<p>既然我们已经概述了将Perforce系统转换为Git的非常有说服力的论点，那么让我们进入如何完成这项任务的实质部分。</p>



<p>1.为改变做准备</p>



<p aria-hidden="true" class="wp-block-spacer">在你开始信口开河之前，花些时间与你的团队交流即将到来的变化，并建立一个过渡期间的工作结构。</p>



<h3>请记住，切换工具不仅与数据有关，也与开发人员有关。您可能希望做到一丝不苟，拥有安全导出和存储数据的程序，并且不希望暂停团队正在进行的每个项目。</h3>



<p>专业提示:考虑一个团队接一个团队、一个项目接一个项目地迁移，并尝试在新项目开始时安排迁移时间。T3】</p>



<p>投入时间和精力向您的团队传达向Git迁移的必要性，包括原因、方式和预期的最终结果。毕竟没有人喜欢改变。你肯定会遇到一些阻力；在你的组织中寻找那些能够向同事宣传并保持精神状态的Git拥护者。</p>



<p aria-hidden="true" class="wp-block-spacer">每个人都需要时间来适应新的系统和工作流程，但这是值得的。进行小的、迭代的、有形的、易于理解的改变将有助于过程的成功和持续。</p>



<h2>2.清理您的数据</h2>



<p>这是删除任何不必要的分支的时候了；每个项目减少到一个主分支是理想的。这也是检查和删除任何不必要提交的二进制文件的好时机。</p>



<p aria-hidden="true" class="wp-block-spacer">选择如何导出二进制文件要特别小心，因为它们在Git中的管理方式非常不同。虽然Perforce在二进制文件管理方面表现出色，但这是Git相形见绌的一点。简而言之，您不会想要将Perforce中的大量二进制blobs合并到Git中，因此相应地清理您的数据。<a href="https://support.gitkraken.com/git-workflows-and-extensions/intro-and-requirements/" target="_blank" rel="noreferrer noopener"> Git LFS </a>在这里可以派上用场。</p>



<h3>3.导出您的数据</h3>



<p>将数据从Perforce转移到Git有两种主要方法。您可以使用类似于<a href="https://www.perforce.com/perforce/r15.3/manuals/git-fusion/" target="_blank" rel="noreferrer noopener"> Git Fusion </a>的工具，它保存整个历史并将Perforce服务器的一部分提取到Git存储库中。这个选项需要最多的时间和精力，但是它保留了最多的历史。</p>



<p>或者，你可以选择重新开始。只需提取对应于相关项目的每个分支的头，并将其签入一个新的空Git存储库。虽然这是最简单、最直接的方法，但是如果您需要深入研究历史代码，您会希望保持旧的Perforce服务器完好无损。</p>



<p><em> <strong>专业提示:您必须首先确保您的Perforce工作区已经用您想要的数据的正确视图定义。</strong>T3】</em></p>



<p>4.在Git中变得有条理</p>



<p>成功移动数据后，可以开始将用户和权限映射到Git托管服务，一次一个项目。</p>



<p aria-hidden="true" class="wp-block-spacer">然而，将Perforce权限转换为Git托管服务(GitHub、Bitbucket、GitLab、Azure DevOps)的等效权限可能会很棘手。这是因为Perforce权限是出了名的精细和复杂，存在排除对单个文件的访问的风险。</p>



<h3>Perforce复杂的许可方案是服务器陷入困境的首要原因；每次尝试访问服务器都会在复杂的数据结构上产生昂贵的计算。</h3>



<p>考虑到Git结构:项目、回购和分支级别，您的项目负责定义更简单的权限集。享受众多新工作流程选项带来的荣耀。</p>



<p>5.健全性检查</p>



<p aria-hidden="true" class="wp-block-spacer">在您对迁移是否成功进行苛刻的评估之前，设定现实的期望是很重要的。例如，您的数据传输极不可能在Git中产生一点一点的历史记录。这没关系。</p>



<h3>完成数据导出和导入后，开始测试。在将DevOps管道从Perforce切换到Git之后，使用CI/CD验证来确保所有测试都通过。你还能部署吗？</h3>



<p>下一步是什么？</p>



<p>在你把鲜血、汗水和泪水投入到一场迫在眉睫的迁徙之后，接下来会发生什么？好吧，你可以把花在Perforce上的钱拿去办一个Git派对。🤷🥳</p>



<p>要帮助您的团队使用Git，请查看我们的<a href="https://www.gitkraken.com/learn-git" target="_blank" rel="noreferrer noopener">学习Git数据库</a>，里面有各种经验水平的Git教程。</p>



<p aria-hidden="true" class="wp-block-spacer">要在您的组织内获得扩展Git的帮助，请访问我们的<a href="https://www.gitkraken.com/knowledge-center" target="_blank" rel="noreferrer noopener"> Git知识中心</a>以获得关于使用您的托管服务成功扩展Git的信息:<a href="https://www.gitkraken.com/github" target="_blank" rel="noreferrer noopener"> GitHub </a>、<a href="https://www.gitkraken.com/gitlab" target="_blank" rel="noreferrer noopener"> GitLab </a>、<a href="https://www.gitkraken.com/bitbucket" target="_blank" rel="noreferrer noopener"> Bitbucket </a>和<a href="https://www.gitkraken.com/azure-devops" target="_blank" rel="noreferrer noopener"> Azure DevOps </a>。</p>



<h3>4.在Git中变得有条理</h3>



<p>成功移动数据后，可以开始将用户和权限映射到Git托管服务，一次一个项目。</p>



<p>然而，将Perforce权限转换为Git托管服务(GitHub、Bitbucket、GitLab、Azure DevOps)的等效权限可能会很棘手。这是因为Perforce权限是出了名的精细和复杂，存在排除对单个文件的访问的风险。</p>



<p>Perforce复杂的许可方案是服务器陷入困境的首要原因；每次尝试访问服务器都会在复杂的数据结构上产生昂贵的计算。</p>



<p>考虑到Git结构:项目、回购和分支级别，您的项目负责定义更简单的权限集。享受众多新工作流程选项带来的荣耀。</p>



<p aria-hidden="true" class="wp-block-spacer">5.健全性检查</p>



<h3>在您对迁移是否成功进行苛刻的评估之前，设定现实的期望是很重要的。例如，您的数据传输极不可能在Git中产生一点一点的历史记录。这没关系。</h3>



<p>完成数据导出和导入后，开始测试。在将DevOps管道从Perforce切换到Git之后，使用CI/CD验证来确保所有测试都通过。你还能部署吗？</p>



<p>下一步是什么？</p>



<p aria-hidden="true" class="wp-block-spacer">在你把鲜血、汗水和泪水投入到一场迫在眉睫的迁徙之后，接下来会发生什么？好吧，你可以把花在Perforce上的钱拿去办一个Git派对。🤷🥳</p>



<h2>要帮助您的团队使用Git，请查看我们的<a href="https://www.gitkraken.com/learn-git" target="_blank" rel="noreferrer noopener">学习Git数据库</a>，里面有各种经验水平的Git教程。</h2>



<p>要在您的组织内获得扩展Git的帮助，请访问我们的<a href="https://www.gitkraken.com/knowledge-center" target="_blank" rel="noreferrer noopener"> Git知识中心</a>以获得关于使用您的托管服务成功扩展Git的信息:<a href="https://www.gitkraken.com/github" target="_blank" rel="noreferrer noopener"> GitHub </a>、<a href="https://www.gitkraken.com/gitlab" target="_blank" rel="noreferrer noopener"> GitLab </a>、<a href="https://www.gitkraken.com/bitbucket" target="_blank" rel="noreferrer noopener"> Bitbucket </a>和<a href="https://www.gitkraken.com/azure-devops" target="_blank" rel="noreferrer noopener"> Azure DevOps </a>。</p>



<p>For help getting your team onboarded using Git, checkout our <a href="https://www.gitkraken.com/learn-git" target="_blank" rel="noreferrer noopener">Learning Git database</a>, stocked full with Git tutorials for every experience level. </p>



<p>For help scaling Git within your organization, visit our <a href="https://www.gitkraken.com/knowledge-center" target="_blank" rel="noreferrer noopener">Git Knowledge Center</a> for information on successfully scaling Git with your hosting service: <a href="https://www.gitkraken.com/github" target="_blank" rel="noreferrer noopener">GitHub</a>, <a href="https://www.gitkraken.com/gitlab" target="_blank" rel="noreferrer noopener">GitLab</a>, <a href="https://www.gitkraken.com/bitbucket" target="_blank" rel="noreferrer noopener">Bitbucket</a>, and <a href="https://www.gitkraken.com/azure-devops" target="_blank" rel="noreferrer noopener">Azure DevOps</a>. </p>
		</div>
				</div>    
</body>
</html>