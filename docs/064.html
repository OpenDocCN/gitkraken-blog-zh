<html>
<head>
<title>Code Review Best Practices | Checklist, Tools, &amp; Tips for Success</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>代码审查最佳实践|清单、工具和成功秘诀</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/blog/code-review#0001-01-01">https://www.gitkraken.com/blog/code-review#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<h2>什么是代码审查？</h2>



<p>代码审查是一个过程，以确保bug和错误在进入生产之前被捕获和修复。这通常需要开发人员的参与，他们并不直接参与被审查代码的特定部分的实现。代码审查是更大的质量保证过程的一部分，以确保最终产品完全按照预期执行。</p>



<p>除了检查源代码中的bug，代码审查是检查代码库是否存在最佳实践以及是否存在<a href="https://en.wikipedia.org/wiki/Anti-pattern" target="_blank" rel="noreferrer noopener">反模式</a>的一个好方法。</p>



<p aria-hidden="true" class="wp-block-spacer">为什么代码审查很重要？</p>



<h2>人们经常对各种各样的事情有不同的看法，尤其是涉及到代码的时候，这是完全可以的！但是当涉及到生产应用程序中使用的代码库时，您将希望确保团队中的所有开发人员在命名策略或架构模式方面使用相同的语言。</h2>



<p>为什么这很重要？想象两个开发人员，Alice和Bob，一起编写一个应用程序。Alice喜欢使用全局单例字符串，也称为<a href="https://en.wikipedia.org/wiki/Singleton_pattern" target="_blank" rel="noreferrer noopener">单例模式</a>，用于状态管理，而Bob更喜欢使用<a href="https://en.wikipedia.org/wiki/State_pattern" target="_blank" rel="noreferrer noopener">状态模式</a>。他们处理应用程序的不同部分，将他们的更改直接提交给共享的repo。</p>



<p>然后Alice休假几周离开项目，现在Bob必须修复她实现的功能中的一个bug。他看到了全局单例字符串，困惑地将其更改为状态模式实现，就像他对以前实现的所有特性所做的那样。</p>



<p>不幸的是，这样做需要两倍的时间来修复错误，所以Bob很快变得恼火和失望。</p>



<p>如果他们从一开始就实现了代码审查过程，Alice和Bob会更快地识别出风格上的差异。他们需要的是一个对双方都有意义的协作工作流程。</p>



<p>如果他们从一开始就实现了代码审查过程，Alice和Bob会更快地识别出风格上的差异。他们需要的是一个对双方都有意义的协作工作流程。</p>



<p aria-hidden="true" class="wp-block-spacer">代码评审应该包括什么？</p>



<h2>让我们来看看一个成功的代码审查应该覆盖的基本轮廓，以及审查者应该密切关注的代码元素。</h2>



<p>执行代码审查时，审查代码的人应该关注以下方面:</p>



<p>代码风格</p>



<ul><li>可读性</li><li>模式</li><li>体系结构</li><li>没有代码审查的后果</li></ul>



<p aria-hidden="true" class="wp-block-spacer">为什么代码审查如此重要？没有代码评审或者过多的代码评审会怎么样？</p>



<h2><strong> 1。引入高风险bug的可能性。</strong></h2>



<p>代码审查主要是为了发现代码中的错误。如果代码评审太少，或者根本没有代码评审，一些bug可能会被忽视地传递到产品中。bug可能导致低风险，比如有问题的UI，也可能导致高风险，比如安全漏洞。没有代码审查，团队就没有什么工具来预测和评估这样的风险。</p>



<p><strong> 2。不一致的代码库。</strong></p>



<p>在Alice和Bob的例子中，人们倾向于选择不同的模式和代码风格，并且可能使用不同的方法来进行状态管理。方法上的差异可能会减缓进一步的开发和代码支持。每次你需要实现一些新的东西或者修复一个bug，开发人员将不得不花费时间和精力去学习一个新的过程，这进一步减慢了这个过程。</p>



<p><strong> 3。公交因素。</strong></p>



<p><a href="https://en.wikipedia.org/wiki/Bus_factor" target="_blank" rel="noreferrer noopener">总线因素</a>指的是与团队成员之间不共享信息和能力相关的风险度量。</p>



<p>因此，如果只有一个人知道项目的某个特定部分是如何工作的——编写它的人——并且这个人离开了项目，那么您很可能不得不执行另一次代码审查，或者甚至一起重写代码。</p>



<p>过多的代码审查</p>



<p>当涉及到过多的代码审查时，很少有相关的风险，但是也有一些缺点，可以这么说。进行大量的代码审查可能会导致生产延迟，并可能导致开发人员过多地关注满足代码审查，而不是实现高层次的业务目标。</p>



<p aria-hidden="true" class="wp-block-spacer">在一天结束的时候，找到一个黄金分割点是很重要的。如果您必须优先考虑更快的代码生产，请评估与限制代码审查相关的风险。</p>



<h2>代码审查清单</h2>



<p>首先，代码评审是一个交流的过程。像任何其他人一样，每个参与的人都应该感到被尊重，以使流程有效率。因此，有一些简单的规则可以遵循，使您的代码审查既有帮助又美观，同时还能提供有用的反馈。</p>



<p>如果您是执行审查的人，请考虑下面的代码审查清单:</p>



<p aria-hidden="true" class="wp-block-spacer"><strong> 1。说明你的观点。</strong></p>



<h2>当指出一个错误时，补充一点解释，说明为什么你认为这应该被视为一个错误。这会让你听起来很自信，也有助于代码的作者在将来不会犯类似的错误。</h2>



<p>另一方面，可能是你错了。解释你来自哪里将有助于鼓励讨论，如果有任何意见分歧，找到最佳解决方案。</p>



<p><strong> 2。包括例子。</strong></p>



<p>有时，很难理解这样的信息:“根据指导方针改变它”或“使用X模式。”对你来说显而易见的事情对其他人来说可能是一个完全的谜。</p>



<p>给出一个你认为最终结果应该是什么样的简单例子，以帮助作者理解你的想法。</p>



<p><strong> 3。指出具体问题。</strong></p>



<p>“我不知道这段代码有什么问题，但你可以做得更好”并不是很有帮助。告诉代码作者到底是什么导致了这个问题。是内存管理吗？是代码风格吗？</p>



<p>确保提供有用的细节，尤其是如果解决方案需要作者进行进一步的调查。大多数时候，当代码没有以令人满意的状态提供时，更好的解决方案不会突然出现在评审者的脑海中。请求作者进一步调查是可以的，但是你应该提供一些方向。</p>



<p>代码审查技巧</p>



<p>人们合作时工作效率更高。“三个臭皮匠顶个诸葛亮”，对吧？这就是为什么作为一个评论者，你应该试着听起来友好。保持合作的语气有助于团队专注于解决手头的问题，而不是升级冲突。</p>



<p>以下是一些关于语调的代码审查技巧:</p>



<p>避免责备。</p>



<p aria-hidden="true" class="wp-block-spacer">不要说:“你做了一件坏事”；说:“这样做不好，原因如下……”毕竟，谁写了不正确的代码并不重要。重要的是这些代码是否被修复。所以集中精力评论代码而不是开发者。</p>



<h2>代码审查不是性能评估。</h2>



<p>简单地告诉别人他们不够好不会帮助他们变得更好。将代码评审视为异步结对编程过程的一部分。你不会告诉你的结对编程伙伴他们不擅长编程，是吗？相反，你帮助他们改正错误。这种方法也适用于代码审查。</p>



<p>感同身受。</p>



<ul><li>让代码评审评论充满批评可能会让人不知所措，即使这些批评写得尽可能友好。表现出一些同理心，看到好代码就赞美！它可以走很长的路。当一个开发人员花费时间和精力做了一些对团队和产品有价值的事情，这是值得注意的！<ul><li>欢迎进一步讨论。</li></ul></li><li>每个代码评审评论都应该是可以讨论的。你可以主动联系参与此过程的任何人，详细说明此事，或者确保你的团队知道如何联系你。一个及时的电话甚至几条信息可以节省很多时间，减少误解和不快。<ul><li>简单地告诉别人他们不够好不会帮助他们变得更好。将代码评审视为异步结对编程过程的一部分。你不会告诉你的结对编程伙伴他们不擅长编程，是吗？相反，你帮助他们改正错误。这种方法也适用于代码审查。</li></ul></li><li>谁应该执行代码审查？<ul><li>当谈到代码审查过程时，一个主要问题是谁应该进行审查？基本上，有两种选择:</li></ul></li><li>一个指定的人——通常是高级开发人员或团队领导——为团队中的每个人执行代码评审。<ul><li>团队中的每个人都可以执行代码审查。</li></ul></li></ul>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>你也可以考虑两者之间的东西，比如指定的子团队，但是它的作用与第一个选项相同。</h2>



<p>当谈到代码审查过程时，一个主要问题是谁应该进行审查？基本上，有两种选择:</p>



<ol><li>代码审查和拉请求模板</li><li><a href="https://www.gitkraken.com/blog/enhancing-pull-request-descriptions-templates" target="_blank" rel="noreferrer noopener">拉请求模板</a>有助于跨团队实现一致的代码评审过程。</li></ol>



<p aria-hidden="true" class="wp-block-spacer">这就是像GitKraken Git GUI这样的工具真正派上用场的地方。如果你正在用GitKraken管理你的项目分支，你可以简单地在中心图的分支上点击鼠标右键来访问许多选项，比如推和拉、合并、重定基础或者启动一个<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-pull-request-in-git" target="_blank" rel="noreferrer noopener"> Git拉请求</a>。</p>



<p>如果您选择启动请购单的选项，拉式请求模式将会打开。您可以在这里设置PR标题、描述、代理人、审核人和一些其他细节。当你对你所得到的感到满意时，点击<kbd>Create pull request</kbd>在左侧面板中查看你的PR，以及你的相关托管服务。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>代码审查和拉请求模板</h2>



<p>GitKraken支持针对<a href="https://www.gitkraken.com/learn/git/problems/github-pull-requests" target="_blank" rel="noreferrer noopener"> GitHub pull requests </a>、GitLab pull requests和Azure DevOps pull requests的pull requests模板，并让您的团队能够为您的所有项目创建一致的代码审查流程。</p>



<p>这就是像GitKraken Git GUI这样的工具真正派上用场的地方。如果你正在用GitKraken管理你的项目分支，你可以简单地在中心图的分支上点击鼠标右键来访问许多选项，比如推和拉、合并、重定基础或者启动一个<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-pull-request-in-git" target="_blank" rel="noreferrer noopener"> Git拉请求</a>。</p>



<p>拉式请求过程是成功的代码审查不可或缺的，但是建立一个好的系统需要时间。让GitKraken通过内置的公关管理和模板来完成繁重的工作。<br/></p>



<p aria-hidden="true" class="wp-block-spacer"/>





<p aria-hidden="true" class="wp-block-spacer">代码评审最重要的部分之一是Git pull请求体。这也是代码审查中最容易引发冲突的部分之一。</p>



<p>一些人认为Git pull请求的标题是不言自明的，而另一些人则很难理解“修复BUG”所描述的是什么。为了避免争论，您可以作为一个团队一起工作，找到一个代码审查清单，其中包括要编写的最重要的信息，对于看似显而易见的拉请求，例如受影响的特性的列表。</p>



<p aria-hidden="true" class="wp-block-spacer">您的Git pull请求模板可以有一个预制的主体，其中有关于必须以某种方式陈述的内容的提示。您将很快发现代码审查清单的哪些部分对审查者最有用，如果有的话，经常是空的。</p>



<div class="callout">
<div class="callout-content">
<p>你可以阅读更多关于<a href="https://www.gitkraken.com/blog/enhancing-pull-request-descriptions-templates" target="_blank" rel="noreferrer noopener"> Git Pull请求模板</a>的内容，下面是一个典型PR模板的例子。</p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>代码评审最重要的部分之一是Git pull请求体。这也是代码审查中最容易引发冲突的部分之一。</p>



<p><a href="https://drive.google.com/file/d/1wUDjZ4FywNCOEHlg6HxkLtEwKcoGsOEM/view?usp=sharing" target="_blank" rel="noopener"/></p>



<p>交叉代码审查</p>



<p>团队参与在成功的代码评审过程中至关重要。如果您的团队很难确定一种单一的评审方法，那么交叉代码评审可能是您的救星。</p>



<p aria-hidden="true" class="wp-block-spacer">首先，您将设置合并Git pull请求所需的“批准”数量，然后您可以释放您团队的代码审查能力！</p>





<p aria-hidden="true" class="wp-block-spacer"><a href="https://support.gitkraken.com/working-with-repositories/pull-requests/#pull-request-templates" target="_blank" rel="noreferrer noopener">git kraken</a>中的Pull请求模板可以帮助跨代码审查过程。当您在GitKraken中创建新的拉式请求时，PR模式中将出现一个拉式请求模板下拉菜单。这允许您从已经为您的存储库之一创建的模板中进行选择，以便您的团队可以快速地在指定的预起草模板上填写所有需要的信息。</p>



<p>让您团队中的任何人检查每个拉取请求都会很有帮助。详细说明拉取请求的优先级，然后让人们根据优先级决定审查什么。例如，你可以有一个宽松的渠道，在那里紧急的PRs被投票表决，投票最多的一个必须在一天结束前被任何人审核。</p>



<h3>与代码的不同部分一起工作会让团队更加清楚项目中发生了什么。与各种团队成员一起工作将会很快为代码样式、拉式请求完成等建立新的可预测的规范。交叉代码评审是团队内部沟通和知识交流的最有效的方式之一。</h3>



<p>GitHub代码审查</p>



<p>GitKraken还可以直接在GUI中管理GitHub pull请求，让团队中的每个人都能快速轻松地审查GitHub代码。</p>



<p>GitKraken中的交互式GitHub pull request视图允许您编辑pull request标题、描述、审阅者、受托人、里程碑和标签。你也可以给审查你的代码的人留下评论。</p>



<p>对于那些进行GitHub代码审查的人来说，你甚至可以批准PR或者请求修改，所有这些都不需要导航到GitHub。</p>



<p>与代码的不同部分一起工作会让团队更加清楚项目中发生了什么。与各种团队成员一起工作将会很快为代码样式、拉式请求完成等建立新的可预测的规范。交叉代码评审是团队内部沟通和知识交流的最有效的方式之一。</p>



<p aria-hidden="true" class="wp-block-spacer"><a href="https://drive.google.com/file/d/1Q2uKThTVtF5U6-_pRpSDlhHYqBHnlU5E/view?usp=sharing" target="_blank" rel="noopener"/></p>







<p aria-hidden="true" class="wp-block-spacer"><strong> <em> ProTip:双击GitHub pull request视图右下角的一个分支名称，GitKraken将自动检查该分支并打开图表，这样您就可以直接开始工作了！</em>T3】</strong></p>



<h2>GitHub Code Review </h2>



<p>最小化代码审查的工作量</p>



<p>随着时间的推移，代码审查经常变得越来越弱，并且经常作为一个过程被永远放弃。如果这是发生在你的团队身上的事情，这并不意味着代码审查对你不起作用或者只是不起作用。对于团队来说，代码评审失败的原因之一是因为这个过程花费了评审人员太多的精力，这种负担会很快变得难以承受。</p>



<p>那么，如何将与适当的代码审查相关的工作最小化呢？</p>



<p aria-hidden="true" class="wp-block-spacer"/>





<p>CI/CD和自动化代码评审</p>



<p>测试是代码审查过程中花费大量精力的一部分。如果你不确定代码是否可以编译，你能批准合并一些代码吗？</p>



<p aria-hidden="true" class="wp-block-spacer">一个典型的过程可能要求在点击“批准”按钮之前，您<a href="https://www.gitkraken.com/learn/git/problems/git-clone-branch" target="_blank" rel="noreferrer noopener">克隆Git分支</a>，编译代码，然后甚至可能测试代码。对于大型项目来说，这尤其耗时，因为克隆和编译需要很长时间。你本可以花这些时间来编写有用的代码，但是，你却在等待别人的代码来编译…</p>



<h2>解决方法很简单:不要做手工测试！说真的。让持续集成(CI)来处理这项工作，甚至在你提出代码审查的请求之前。这将需要一些额外的自动化代码，但是，嘿，这些代码将为您和您的团队节省工作时间！</h2>



<p>在CI代码审查程序中可以测试什么？</p>



<p>代码是否编译。</p>



<p aria-hidden="true" class="wp-block-spacer">代码是否生成。</p>



<h2>代码能否正确归档和部署(Docker，我们看着你🐳).</h2>



<p>是否所有的依赖项都能顺利集成(尤其是在版本发生变化的情况下)。</p>



<p>单元测试和其他自动化测试通过。</p>



<p>代码评审工具</p>



<p>为您的团队配备适当的代码审查工具将为您的成功做好准备，并有助于消除不必要的工作和开发人员的倦怠。</p>



<ul><li>GitKraken Git GUI 最初通过提供对团队工作的更好的可见性来帮助简化代码审查过程。GitKraken中的中央图形以一种有意义的方式显示了您的分支和提交，因此您的团队可以创建更好的代码，减少错误。</li><li>当整个团队都参与制定和审查拉请求时，跟踪项目中所有潜在的变更会变得很困难。您和您的团队可以根据PR的打开者、分配者、等待审核者等过滤拉动请求，轻松组织您的审核。</li><li>代码能否正确归档和部署(Docker，我们看着你🐳).</li><li>是否所有的依赖项都能顺利集成(尤其是在版本发生变化的情况下)。</li><li>GitKraken还集成了在代码评审期间有助于集成测试的工具:GitHub Actions和GitLab CI。</li></ul>



<p aria-hidden="true" class="wp-block-spacer"/>



<h1>GitKraken提供的集成选项将确保您的团队在所有项目中提供一致的代码审查过程，并且您可以快速找到您正在寻找的PR。<br/></h1>



<p>为您的团队配备适当的代码审查工具将为您的成功做好准备，并有助于消除不必要的工作和开发人员的倦怠。</p>



<p>您可能还想投资一个静态代码分析器，用于样式指南违规和反模式检测。</p>



<p>代码评审最佳实践</p>



<p aria-hidden="true" class="wp-block-spacer">不要让代码审查过于复杂。</p>





<p aria-hidden="true" class="wp-block-spacer">代码评审不是让代码完美的工具。代码审查是一种帮助开发人员避免难以察觉的愚蠢错误的工具。专注于帮助在合理的时间交付一个好的项目，而不是完善代码库。</p>



<p><strong>对队友好一点；促进代码审查的友好文化。</strong></p>



<p aria-hidden="true" class="wp-block-spacer">评论代码，而不是作者，并提供有用的反馈，而不是“👎 / 👍 ".如果代码审查在你的团队中引起争论，努力促进一种友好的文化。创建拉动式请求模板并预订会议以讨论PRs。</p>



<div class="callout">
<div class="callout-content">
<p><strong>只复习不能自动勾选的。</strong></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer">通过尽可能地自动化来最小化审查Git pull请求所需的工作量。只对那些不能自动检查的特性，如架构、可读性等，请求代码评审。</p>



<p>除非有充分的理由，否则不要单独进行代码评审。</p>



<p aria-hidden="true" class="wp-block-spacer">总线因素并不是反对单独代码评审的唯一理由。如果您希望代码评审有助于知识交流，团队的参与是至关重要的。鼓励交叉评审:这比指定评审模式更省时，也更有趣。</p>



<h2>投资于减轻团队工作的代码评审工具。</h2>



<ul><li>不要让你的团队做所有与代码审查相关的工作。投资于使过程更容易的工具，这样你的团队就可以专注于编写高质量的代码，从而减少审查时间。<ul><li>代码评审不是让代码完美的工具。代码审查是一种帮助开发人员避免难以察觉的愚蠢错误的工具。专注于帮助在合理的时间交付一个好的项目，而不是完善代码库。</li></ul></li></ul>



<ul><li><strong>对队友好一点；促进代码审查的友好文化。</strong></li></ul>



<ul><li><strong>只复习不能自动勾选的。</strong></li></ul>



<ul><li>除非有充分的理由，否则不要单独进行代码评审。</li></ul>



<ul><li>投资于减轻团队工作的代码评审工具。</li></ul>



<p/>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>GitKraken将改进并加速您团队的评审过程，这样您就可以专注于代码质量，而不是挖掘拉取请求。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>
		</div>
				</div>    
</body>
</html>