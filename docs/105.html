<html>
<head>
<title>What is Git Fetch | Remote Branch &amp; Solutions to Error Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>什么是Git Fetch |远程分支和错误问题的解决方案</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/learn/git/git-fetch#0001-01-01">https://www.gitkraken.com/learn/git/git-fetch#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p>Git变得如此流行的原因之一是因为它使任何规模的团队都能够在代码上进行协作。当使用Git时，用户可以<a href="https://www.gitkraken.com/learn/git/git-push" target="_blank" rel="noreferrer noopener"> Git将</a>更改推送到他们本地存储库的共享副本，称为<a href="https://www.gitkraken.com/learn/git/git-remote" target="_blank" rel="noreferrer noopener"> Git remote </a>。当新的合作者执行<a href="https://www.gitkraken.com/learn/git/git-clone" target="_blank" rel="noreferrer noopener"> Git克隆</a>时，他们可以拉下这些集体变更——所有相关<a href="https://www.gitkraken.com/learn/git/commit" target="_blank" rel="noreferrer noopener"> Git提交</a>的总和——但是如果有人只想拉下选定的变更呢？</p>



<p>如果有人已经克隆了一个远程，但是想要获得其他人提交的新更改，并将这些更改合并到他们的本地repos中，他们可以执行Git获取。在本文中，我们将详细回顾Git fetch命令，并回顾如何在命令行和<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>中执行该操作</p>







<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>“@GitKraken让我的生活轻松多了！在分支之间切换，压缩提交，很好的概述代码中的变化等等。👌"–<a href="https://twitter.com/mjovanc/status/1554397486244036609" target="_blank" rel="noopener">@ @ mjovanc</a><br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-embed aligncenter is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"><iframe title="Git Fetch | What is Git Fetch and How to Use it | Learn Git" src="https://www.youtube.com/embed/uEEcw1s_wWk?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2 id="what-is-git-fetch">什么是Git Fetch？</h2>



<p>Git fetch是Git中的一个命令，它执行两个不同的任务。首先，Git fetch从特定的远程分支下载所有提交，在本地更新远程跟踪分支。同时，Git更新一个名为FETCH_HEAD的特殊文件，该文件跟踪下载的更新来自哪里以及涉及哪些提交sha。</p>



<p aria-hidden="true" class="wp-block-spacer"/>





<p aria-hidden="true" class="wp-block-spacer"/>



<h3><strong>远程跟踪分支</strong></h3>



<p>Git通过远程跟踪分支跟踪本地<a href="https://www.gitkraken.com/learn/git/branch" target="_blank" rel="noreferrer noopener"> Git分支</a>与任何远程存储库的不同步程度。Git根据远程跟踪分支的内容，统计本地repo来自远程repo之前或之后的提交次数。超前意味着本地分支中存在远程分支中不存在的变化。另一方面，滞后意味着远程上的更改在相应的本地分支上还不存在。<br/> <br/>您可以通过执行以下命令查看一个存储库的所有远程跟踪分支:<br/> <code>git branch -a</code></p>



<p aria-hidden="true" class="wp-block-spacer"/>


<div class="wp-block-image">
<figure class="aligncenter size-large"><picture decoding="async" class="wp-image-9069">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-1024x749.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches.png.webp 1372w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%20749'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="" alt="A list of remote tracking branches shown from running the command: git branch -a." data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-1024x749.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-300x220.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-768x562.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches.png 1372w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-1024x749.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-9069">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-1024x749.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches.png.webp 1372w" sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="../Images/154b55e89f93e2c248fc279b20e5b7c5.png" alt="A list of remote tracking branches shown from running the command: git branch -a." srcset="https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-1024x749.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-300x220.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-768x562.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches.png 1372w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2022/09/git-fetch-remote-tracking-branches-1024x749.png"/>
</picture>
</noscript></figure></div>


<p aria-hidden="true" class="wp-block-spacer"/>



<p>Git是异步工作的，这意味着每个人都在本地机器上处理回购的完整副本。与SVN或其他版本控制系统不同，使用Git，没有真正的中央存储库可以连接。Git不会通过互联网与远程repos保持连接，并假设您将从远程服务器手动下载提交。同时，Git需要为您提供一种方法来检查这些更改，以防您不想在本地应用它们。这就是Git fetch的本质。<br/> <br/>当您执行一个Git获取时，远程分支上的所有提交首先被下载到远程跟踪分支，允许您在将更改应用到本地分支之前查看提交的内容。你可以用几种不同的方法来做到这一点。</p>



<p>查看本地下载的变更示例的第一种方法是<a href="https://www.gitkraken.com/learn/git/git-checkout" target="_blank" rel="noreferrer noopener">Git check out</a>remote tracking分支。这将使你处于分离的头部状态，意味着头部没有指向局部分支的末端。你可以看到所有的修改，复制代码，或者<a href="https://www.gitkraken.com/learn/git/problems/create-git-branch" target="_blank" rel="noreferrer noopener">创建一个新的Git分支</a>，所有这些都不会影响本地分支。</p>



<p>另一个可以快速向您展示发生了什么变化的选项是运行一个<a href="https://www.gitkraken.com/learn/git/git-diff" target="_blank" rel="noreferrer noopener"> Git diff </a>，在您执行一个Git fetch之后，它将本地分支与远程跟踪分支进行比较。我们将在本文的后面用命令行<a href="https://www.gitkraken.com/cli" target="_blank" rel="noreferrer noopener">和GitKraken客户端展示这样的例子。</a></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h3><strong> Git FETCH_HEAD </strong></h3>



<p>每当运行Git init时，都会创建一个./git文件夹，保存帮助Git做它应该做的事情的密钥。每个文件夹中都有一个名为FETCH_HEAD的特殊文件。FETCH_HEAD文件跟踪最近获取的所有分支，以及远程上该特定分支上存在的最新提交的提交SHA。</p>



<p>这个文件有一个特殊的功能，因为它可以在一个<a href="https://www.gitkraken.com/learn/git/git-merge" target="_blank" rel="noreferrer noopener"> Git合并</a>中使用。在这种情况下，Git将为FETCH_HEAD中可用于合并的所有分支解析合并请求。当执行<a href="https://www.gitkraken.com/learn/git/problems/git-pull-vs-fetch" target="_blank" rel="noreferrer noopener"> Git拉取而不仅仅是Git获取</a>时，这将自动发生。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h4><strong>用FETCH_HEAD </strong>从多个远程获取</h4>



<p>您可以在FETCH_HEAD中引用来自多个远程仓库的分支的多个版本。默认情况下，每次运行Git fetch都会覆盖整个FETCH_HEAD文件。</p>



<p>然而，通过Git fetch使用<code>--append</code>选项，或者仅仅使用<code>-a</code>，Git将会把这些额外的获取分支添加到FETCH_HEAD文件中。运行一个<code>git merge FETCH_HEAD</code>将合并来自不同远程的所有提交，所有这些都在一个步骤中完成！💥</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>跟踪回购的所有遥控器并不复杂。免费下载GitKraken客户端，现在就可以可视化并更好地了解您的存储库！<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2 id="git-fetch-remote-branch"><strong> Git获取远程分支</strong></h2>



<p>正如您已经读到的，Git fetch被设计为将更改下载到本地计算机上的远程跟踪分支。但是Git fetch如何知道您打算从哪个分支和哪个远程下载更改，特别是当不止一个远程可用时？最佳实践是在运行Git fetch时指定我们想要的远程和分支。<br/> <br/>如果在没有其他选项或子命令的情况下运行<code>git fetch</code>，Git将假设您想要从默认的上游和当前检出的任何分支获取数据。分支的默认上游通常是第一个创建的分支，通常是最初克隆代码的上游。如果你检查。git/config文件，您可以很快看到每个分支与什么上游相关联。</p>



<p>通过明确声明Git获取的目标是哪个远程和分支，可以确保从正确的源代码中获取更新的代码。<br/> <br/>如果你有很多分支和很多遥控器，依靠<code>git fetch –all</code>可以节省大量时间。<code>--all</code>选项告诉Git尝试从所有可能的远程获取任何具有本地不存在的变更的分支。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2 id="solution-error-message"><strong>错误:无法打开。git/FETCH_HEAD权限被拒绝</strong></h2>



<p>有时，当您对FETCH_HEAD执行Git fetch或Git merge时，您的CLI shell将返回一个错误，说明:错误:无法打开。git/FETCH_HEAD权限被拒绝。</p>



<p>发生这种情况的原因有很多，但最常见的是因为您没有正确的用户权限来更新或访问FETCH_HEAD文件。</p>



<p>要解决这个错误，请确保您以对正在使用的Git存储库具有读写权限的用户身份登录。或者，你可以修改文件权限，或者用<code>chmod</code> 允许更多用户<a href="https://www.gitkraken.com/blog/shell-scripting">访问，或者用<code>chown</code>将文件所有权更改为你自己。</a></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2 id="git-fetch-cli"><strong>如何在命令行中获取数据</strong></h2>



<p>在执行Git获取之前，最好先看看哪些Git远程可用于repo。要查看所有可用的遥控器，请使用命令:</p>



<p><code>git remote -v</code></p>



<p aria-hidden="true" class="wp-block-spacer">在上面的例子中，有三个可用的远程位置来下载变更:<code>origin</code>，存储库最初被克隆到本地机器上；<code>gitkraken</code>，它是GitLens产品所有者更新的上游；以及<code>gitlab</code>，它是在<a href="https://about.gitlab.com/" target="_blank" rel="noreferrer noopener">GitLab.com</a>上的回购副本。</p>





<p aria-hidden="true" class="wp-block-spacer"/>



<p><strong>在CLI中使用Git Fetch</strong></p>



<p aria-hidden="true" class="wp-block-spacer">要对当前签出的分支执行Git提取，从默认上游存储库下载更改，请使用以下命令:</p>



<h3><code>git fetch</code></h3>



<p>在上面的例子中，Git从远程<code>origin</code>为分支<code>fetch-example</code>下载了一个变更。如果没有要下载的更改，Git fetch命令将不会产生任何输出，因为没有什么可以显示。</p>



<p><code>git fetch</code></p>



<p aria-hidden="true" class="wp-block-spacer"><strong>在CLI中使用Git获取远程分支</strong></p>



<p class="video-responsive">要定位特定遥控器上的特定分支，请使用以下命令:<br/> <br/> <code>git fetch &lt;remote&gt; &lt;branch&gt;</code></p>



<p aria-hidden="true" class="wp-block-spacer">确保将<code>&lt;remote&gt;</code>替换为您想要的遥控器名称，将<code>&lt;branch&gt;</code>替换为您想要的分支名称。</p>



<p>在上面的例子中，Git从远程<code>origin</code>为分支<code>fetch-example</code>下载了一个变更。如果没有要下载的更改，Git fetch命令将不会产生任何输出，因为没有什么可以显示。</p>



<p aria-hidden="true" class="wp-block-spacer">  </p>



<h3><strong>在CLI中使用Git获取远程分支</strong></h3>



<p>上例中，遥控器是<code>gitlab</code>，分支是<code>fetch-example</code>。该命令将更新远程跟踪分支:<code>gitlab/fetch-example</code>，并更新FETCH_HEAD。</p>



<p>现在，您可以使用以下命令在本地合并所有更改:</p>



<p aria-hidden="true" class="wp-block-spacer"><code>git merge FETCH_HEAD</code></p>



<p class="video-responsive">  </p>



<p aria-hidden="true" class="wp-block-spacer">  </p>



<p>上例中，遥控器是<code>gitlab</code>，分支是<code>fetch-example</code>。该命令将更新远程跟踪分支:<code>gitlab/fetch-example</code>，并更新FETCH_HEAD。</p>



<p><strong>如何使用GitKraken客户端获取数据</strong></p>



<p>使用<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>来完成这个动作的一个最好的部分就是这个工具会自动为你执行获取！</p>



<p aria-hidden="true" class="wp-block-spacer">与Git CLI不同，GitKraken Client可以保持与各种远程设备的连接，并在后台以每分钟一次的频率为您执行Git获取。您可以在GitKraken客户端的Git commit图中看到远程跟踪分支的下载更改，如下所示。</p>



<p class="video-responsive">  </p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2 id="git-fetch-gitkraken-client">要将更改应用到本地repo，只需在提交图上双击要应用更改的远程跟踪分支条目。GitKraken客户端将要求您确认您想要“将本地重置到此处”点击<kbd>Reset Local to Here</kbd>按钮，GitKraken客户端将执行合并。</h2>



<p>使用<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>来完成这个动作的一个最好的部分就是这个工具会自动为你执行获取！</p>



<p>与Git CLI不同，GitKraken Client可以保持与各种远程设备的连接，并在后台以每分钟一次的频率为您执行Git获取。您可以在GitKraken客户端的Git commit图中看到远程跟踪分支的下载更改，如下所示。</p>



<p aria-hidden="true" class="wp-block-spacer">要调整GitKraken客户端执行自动获取的频率，导航至<kbd>Preferences</kbd> → <kbd>General</kbd>。<br/>显示的第一个选项是<kbd>Auto-Fetch Interval</kbd>。您可以将其调整为每分钟一次，最多60分钟一次。您可以通过将频率设置为<code>0</code>来禁用自动抓取功能。</p>





<p aria-hidden="true" class="wp-block-spacer"/>



<p>要将更改应用到本地repo，只需在提交图上双击要应用更改的远程跟踪分支条目。GitKraken客户端将要求您确认您想要“将本地重置到此处”点击<kbd>Reset Local to Here</kbd>按钮，GitKraken客户端将执行合并。</p>



<p aria-hidden="true" class="wp-block-spacer">GitKraken Client可以让您轻松地看到您的存储库中正在发生的事情，并从多个远程位置了解最新的变化！像自动取货这样的功能比单独在终端上工作更方便、更省心。<br/></p>





<p aria-hidden="true" class="wp-block-spacer"/>



<p><strong> GitKraken客户端…就是这样Fetch </strong></p>



<p aria-hidden="true" class="wp-block-spacer">GitKraken Client 使远程存储库的工作变得简单，无论有多少其他合作者在更新代码。这个传说中的<a href="https://www.gitkraken.com/" target="_blank" rel="noreferrer noopener"> Git工具</a>通过自动获取功能使更新变得更加简单，查看代码变化就像点击右边面板上的文件名一样简单。</p>





<p aria-hidden="true" class="wp-block-spacer">这只是GitKraken Client在与他人合作时，让您作为开发者的生活变得更美好的众多方式之一。<a href="https://www.gitkraken.com/download" target="_blank" rel="noreferrer noopener">今天就下载并开始使用GitKraken客户端</a>，传说中的跨平台Git客户端！</p>



<div class="callout">
<div class="callout-content">
<p>GitKraken Client可以让您轻松地看到您的存储库中正在发生的事情，并从多个远程位置了解最新的变化！像自动取货这样的功能比单独在终端上工作更方便、更省心。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong> GitKraken客户端…就是这样Fetch </strong></h2>



<p>GitKraken Client 使远程存储库的工作变得简单，无论有多少其他合作者在更新代码。这个传说中的<a href="https://www.gitkraken.com/" target="_blank" rel="noreferrer noopener"> Git工具</a>通过自动获取功能使更新变得更加简单，查看代码变化就像点击右边面板上的文件名一样简单。</p>



<p>这只是GitKraken Client在与他人合作时，让您作为开发者的生活变得更美好的众多方式之一。<a href="https://www.gitkraken.com/download" target="_blank" rel="noreferrer noopener">今天就下载并开始使用GitKraken客户端</a>，传说中的跨平台Git客户端！</p>
		</div>
				</div>    
</body>
</html>