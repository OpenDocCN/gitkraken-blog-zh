<html>
<head>
<title>Continuous Integration Workflow | GitKon 2022 | Harsh Bardhan Mishra, LocalStack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>持续集成工作流程| GitKon 2022 | Harsh Bardhan Mishra，LocalStack</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/gitkon/continuous-integration-workflow-harsh-bardhan-mishra-localstack#0001-01-01">https://www.gitkraken.com/gitkon/continuous-integration-workflow-harsh-bardhan-mishra-localstack#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"><iframe title="Continuous Integration Workflow | GitKon 2022 | Harsh Bardhan Mishra, LocalStack" src="https://www.youtube.com/embed/tgXSBa65Nzs?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<h3><strong>为您的云构建自动化持续集成工作流&amp;无服务器应用</strong></h3>



<p>随着云&amp;无服务器应用程序开发的兴起，工程师们遇到了本地开发的繁琐问题。当今的云开发缓慢、乏味且成本高昂，并且缺少模拟云服务的选项，这些云服务大多绑定到专有的云提供商。</p>



<p>这些挑战限制了工程师可用的选项，迫使他们依赖模拟测试工具来模拟可以在本地和持续集成(CI)管道上运行的本地云基础架构。</p>



<p><a href="https://github.com/localstack" target="_blank" rel="noreferrer noopener"> LocalStack </a>是一个<strong>云服务模拟器</strong>，它可以在你的本地机器或CI环境上的一个容器中运行，并让你运行你的<strong>云</strong>和<strong>无服务器</strong>应用程序，而无需连接到亚马逊网络服务帐户。</p>



<p>使用LocalStack，您的应用程序所依赖的所有云资源都可以在本地获得。它允许您在AWS环境中运行自动化应用程序测试，而不需要昂贵的AWS开发人员帐户、缓慢的重新部署或来自远程连接的瞬时错误。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-image size-large"><picture decoding="async" class="wp-image-9285">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1024x485.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1536x728.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10.png.webp 1600w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%20485'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="" alt="showing a continuous integration workflow in LocalStack" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1024x485.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-300x142.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-768x364.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1536x728.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10.png 1600w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1024x485.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-9285">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1024x485.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1536x728.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10.png.webp 1600w" sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="../Images/87c136b0b322888b5219914fc7e1842d.png" alt="showing a continuous integration workflow in LocalStack" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1024x485.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-300x142.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-768x364.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1536x728.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image1-10-1024x485.png"/>
</picture>
</noscript></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>开始使用LocalStack持续集成工作流</strong></h2>



<p>通过<code>pip</code>安装官方命令行界面就可以开始使用LocalStack了。您可以直接访问<a href="https://www.gitkraken.com/cli" target="_blank" rel="noreferrer noopener"> CLI </a>来创建您的LocalStack实例，将所有AWS服务包含在一个Docker容器中。</p>



<p>安装后，您可以通过官方AWS CLI与这些本地AWS服务进行交互，或者使用第三方集成，如Terraform、CDK等等。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-image size-large"><picture decoding="async" class="wp-image-9287">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1024x333.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1536x500.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3.png.webp 1999w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%20333'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="" alt="getting started with the LocalStack CLI" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1024x333.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-300x98.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-768x250.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1536x500.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3.png 1999w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1024x333.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-9287">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1024x333.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1536x500.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3.png.webp 1999w" sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="../Images/599e27010d13f5d907969ce3425b2953.png" alt="getting started with the LocalStack CLI" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1024x333.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-300x98.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-768x250.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1536x500.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3.png 1999w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image4-3-1024x333.png"/>
</picture>
</noscript></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>本地堆栈&amp;地形整合</strong></h2>



<p>让我们看看Terraform与LocalStack的集成。有一个<a href="https://github.com/HarshCasper/GitKon-2022-LocalStack" target="_blank" rel="noreferrer noopener">示例Terraform脚本</a>，它采用基于NodeJS的Lambda并将其部署为AWS Lambda函数URL。</p>



<p>然后，这些函数URL可以作为REST APIs使用标准HTTP请求来触发。Terraform是一个基础设施代码框架，它创建一个计划，然后应用该计划来创建资源。我们可以使用相同的Terraform配置在生产环境中部署AWS，在本地或CI环境中部署LocalStack。</p>



<p>要将LocalStack与Terraform的AWS provider一起使用，可以使用定义了本地AWS端点的<code>provider.tf</code>文件或LocalStack的<code>tflocal</code>脚本。</p>



<p>下面是应用Terraform配置在本地创建Lambda函数的样子:</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-image size-large"><picture decoding="async" class="wp-image-9288">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1024x597.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1536x895.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7.png.webp 1999w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%20597'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="" alt="Terraform and LocalStack integration" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1024x597.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-300x175.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-768x448.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1536x895.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7.png 1999w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1024x597.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-9288">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1024x597.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1536x895.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7.png.webp 1999w" sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="../Images/f4a7cdc91f924c253f13ed515b1f4056.png" alt="Terraform and LocalStack integration" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1024x597.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-300x175.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-768x448.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1536x895.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7.png 1999w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image2-7-1024x597.png"/>
</picture>
</noscript></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>正如您在上面的例子中所看到的，Terraform使用LocalStack在本地创建了整个基础设施，只有一个运行中的Docker容器。现在，让我们回顾一下如何在持续集成提供者上运行它。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>使用GitHub操作运行LocalStack】</strong></h2>



<p>所有重要的持续集成提供商都支持LocalStack来部署和测试您的AWS应用程序。工程师将LocalStack与CI提供者一起使用，以确保他们在模拟环境中进行测试，而不是调用实际的AWS APIs。后者成本较高，理想情况下只应用于生产。</p>



<p>要开始使用像GitHub Actions这样的CI提供程序，您必须获取LocalStack映像并下载LocalStack CLI。这里有一个<a href="https://github.com/HarshCasper/GitKon-2022-LocalStack/blob/main/.github/workflows/ci.yml" target="_blank" rel="noreferrer noopener">示例工作流</a>，你可以在你的<code>.github/workflows</code>目录中使用它来开始测试你的AWS云和无服务器应用，而不需要使用任何真正的API来模拟你的堆栈。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-image size-large"><picture decoding="async" class="wp-image-9289">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1024x550.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1536x825.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5.png.webp 1999w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%20550'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="" alt="GitHub Actions and LocalStack integration" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1024x550.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-300x161.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-768x413.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1536x825.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5.png 1999w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1024x550.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-9289">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1024x550.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1536x825.png.webp 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5.png.webp 1999w" sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="../Images/b52507016bcd5580609b19f5428c92ce.png" alt="GitHub Actions and LocalStack integration" srcset="https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1024x550.png 1024w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-300x161.png 300w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-768x413.png 768w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1536x825.png 1536w, https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5.png 1999w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2022/10/image3-5-1024x550.png"/>
</picture>
</noscript></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>GitKraken的传奇<a href="https://www.gitkraken.com/" target="_blank" rel="noreferrer noopener"> Git工具</a>将帮助你提升你的持续集成工作流程。今天免费试用GitKraken工具:<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener">桌面版GitKraken客户端</a>；<a href="https://www.gitkraken.com/gitlens" target="_blank" rel="noreferrer noopener"> GitLens for VS代码</a>；和<a href="https://www.gitkraken.com/git-integration-for-jira" target="_blank" rel="noreferrer noopener">吉拉的Git集成</a>。</p>
		</div>
				</div>    
</body>
</html>