<html>
<head>
<title>How to Use Git Hooks | GitKon 2022 | DJ Schleen, Yahoo!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用Git钩子| GitKon 2022 | DJ Schleen，Yahoo！</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/gitkon/how-to-use-git-hooks-dj-schleen-yahoo#0001-01-01">https://www.gitkraken.com/gitkon/how-to-use-git-hooks-dj-schleen-yahoo#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"><iframe title="How to Use Git Hooks | GitKon 2022 | DJ Schleen, Yahoo!" src="https://www.youtube.com/embed/JI1WYKfjG1I?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>在DevOps中讨论反馈循环时，经常使用术语“左移”。本质上，这意味着如果一个人能够以更快的方式向软件工程师提供反馈，他们将有能力更快地做出反应。一般来说，工程师需要了解的信息是质量问题、构建中断、部署问题，更常见的是安全漏洞。</p>



<p>大多数反馈都是在代码被签入到<a href="https://www.gitkraken.com/learn/git/git-remote" target="_blank" rel="noreferrer noopener">远程Git库</a>之后产生的；通常在一个<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-pull-request-in-git" target="_blank" rel="noreferrer noopener">拉动请求</a>或发布工作流。工程师很少在提交代码之前被告知他们的代码有问题，除非是通过IDE插件在他们编码时提供指导和检查，就像<a href="https://www.gitkraken.com/gitlens" target="_blank" rel="noreferrer noopener"> GitLens for VS Code </a>。虽然这些扩展可以帮助工程师在编写代码时学习和修复代码，但它们不提供更复杂的检查和操作。这就是使用<a href="https://www.gitkraken.com/learn/git/tutorials/how-to-create-git-hooks" target="_blank" rel="noreferrer noopener"> Git钩子</a>可以有所帮助的地方。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong> Git挂钩是一个脚本集合</strong></h2>



<p>Git挂钩只是工程师与Git可执行文件交互时调用的<a href="https://www.gitkraken.com/blog/shell-scripting" target="_blank" rel="noreferrer noopener">脚本</a>的集合。当使用Git提交、合并、推送或管理代码时，本地代码存储库中保存的脚本就会运行。这方面的一个例子是在代码提交到存储库之前运行lint函数。</p>



<p>当用户在他们的本地机器上创建一个<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-git-repository" target="_blank" rel="noreferrer noopener"> Git库</a>时，会创建一个名为<code>.git/hooks</code>、<em> </em>的隐藏文件夹，其中包含工程师可以修改的示例脚本。这些样本的命名约定是<em><kbd>hooktype</kbd>-样本</em>。</p>



<p>将一个示例重命名为它的钩子类型会让Git知道应该运行这个脚本。任何东西都可以放入这些文件；可能性是无限的。不幸的是，这里有一个主要问题。文件夹<code>.git</code>永远不会提交到存储库中，所以对文件夹<code>.git/hooks</code>内容的任何更改都将保留在本地。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>管理Git挂钩</strong></h2>



<p>为了使Git挂钩的管理更容易，并允许定制功能的可移植性，工程师可以利用DevOps Kung Fu Mafia的一个名为<a href="https://github.com/devops-kung-fu/hookz" target="_blank" rel="noreferrer noopener">“Hookz”的工具。</a></p>



<p>Hookz是一个应用程序，它允许工程师在一个简单的yaml文件中为Git调用的任何钩子类型定义将要执行的操作。这个yaml文件可以提交给存储库，并与其他存储库用户共享。开发人员可以添加自定义脚本、调用可执行文件，甚至可以引入在钩子执行期间可以使用的应用程序。</p>



<p>一旦在本地存储库的根目录下创建了这个<code>.hookz.yaml</code>文件并配置了功能，工程师就运行<code>hookz</code>可执行文件，该文件在本地<code>.git/hooks</code> <em> </em>文件夹中构建所有需要的脚本。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>使用Git挂钩添加功能</strong></h2>



<p>Git挂钩为工程师向Git可执行生命周期添加功能提供了无限可能。可以在提交代码之前为<code>pre-commit</code>钩子类型定义一些功能的例子:</p>



<ul><li>从远程存储库中提取，以确保没有遗漏任何上游更改。</li><li>将所有代码依赖项升级到最新版本，以便可以测试升级并解决不兼容问题——这有助于减轻技术债务的积累。</li><li>运行安全工具，即软件组成分析(SAC)工具，可以通知开发人员其依赖关系中的漏洞。</li><li>执行测试用例并生成测试覆盖度量。</li><li>确定代码的圈复杂度、林挺，并提供其他质量检查。</li><li>生成软件物料清单。</li><li>自动更新markdown文档(例如:使用terraform-docs)或其他文件。</li><li>在推送到远程设备之前，将预提交阶段更改或添加的任何内容提交回提交阶段。</li></ul>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>如果任何任务失败，Hookz会输出一个非零的返回代码，提交将会停止。这允许开发人员在被推到远程存储库之前解决问题。</p>



<p>Git挂钩提供了一种强大的方式来收紧反馈循环，比等待工具在远程存储库上运行更快地将信息传递给工程师。这导致了更干净的代码、更快的修复和改进的代码质量。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>如果您正在寻找一种工具，使使用Git和Git挂钩更容易、更安全、更强大，那么GitKraken Client是最好的选择，它是世界上最受开发人员和团队欢迎的Git客户端。<br/></p>

</div>
</div>
		</div>
				</div>    
</body>
</html>