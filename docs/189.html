<html>
<head>
<title>Undo Git Commit | How do you undo your last Git commit?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>撤销Git提交|如何撤销最后一次Git提交？</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/learn/git/problems/undo-git-commit#0001-01-01">https://www.gitkraken.com/learn/git/problems/undo-git-commit#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p>即使对于更有经验、更勤奋的开发人员来说，在使用Git库时也会出错。那么当你在Git中犯了一个错误之后，最好的步骤是什么呢？嗯，那要看情况。</p>



<p>根据手头的情况，修复错误的最佳方法可能是全部撤销。但是请注意:如果您不小心，试图用错误的方式修复错误可能会导致您丢失重要的工作，引入代码冲突等等。</p>



<p>幸运的是，Git确实提供了一些工具来帮助您撤销新提交引入的错误。让我们先看看在<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken Git客户端</a>中撤销Git提交的所有选项，在查看<a href="https://www.gitkraken.com/cli" target="_blank" rel="noreferrer noopener"> CLI </a>中的过程之前，先看看GUI。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>“谢谢@GitKraken的撤销功能，不小心丢弃了我所有的更改，但现在它们又回来了😃"–<a href="https://twitter.com/offset1337/status/1107615811181658118" target="_blank" rel="noopener">@ offset 1337</a><br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>你需要撤销Git提交吗？</h2>



<p>在您开始撤销Git提交之前，您应该确保您真的想要<em>撤销</em>某个东西，而不仅仅是修复或编辑某个东西。如果您确实需要编辑您的最后一次提交，您可以<a href="https://www.gitkraken.com/learn/git/problems/git-commit-amend" target="_blank" rel="noreferrer noopener">修改Git提交</a>。修改Git提交允许您纠正以前的提交消息，并向它添加更多的更改。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>撤销上一次Git提交</strong></h2>



<p>假设您提交了错误的文件，但是您还没有将代码更改推送到您的<a href="https://www.gitkraken.com/learn/git/git-remote" target="_blank" rel="noreferrer noopener"> Git remote </a>中，因此您需要Git撤销本地提交。如何从本地Git存储库中撤销最后一次提交或一组提交？</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>撤销GitKraken中的最后一次Git提交</strong></h2>



<p>当你在GitKraken犯了一个错误时，解决方案只需点击一下。如果您在上次提交时犯了错误，并且希望在推送之前撤销上次Git提交，您可以简单地点击UI顶部工具栏上神奇的<kbd>Undo</kbd>按钮。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-image size-large"><img decoding="async" src="" alt="undo-git-commit-gitkraken-undo-buttonitt" class="wp-image-4750" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-1024x612.png 1024w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-300x179.png 300w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-768x459.png 768w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-1536x919.png 1536w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447.png 1545w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-1024x612.png"/><noscript><img decoding="async" src="../Images/afb142e69804b8a09a578df8eb218c36.png" alt="undo-git-commit-gitkraken-undo-buttonitt" class="wp-image-4750" srcset="https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-1024x612.png 1024w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-300x179.png 300w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-768x459.png 768w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-1536x919.png 1536w, https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447.png 1545w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2021/07/undo-2-e1626900710447-1024x612.png"/></noscript></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>更好的是，如果您意识到您实际上不想撤销上一次Git提交，您可以单击<kbd>Redo</kbd>按钮来撤销您的撤销。</p>



<p>记住这一点很重要，如果你没有执行任何其他动作，使用<kbd>Undo</kbd>按钮可以撤销提交，但是假设你已经<a href="https://www.gitkraken.com/learn/git/problems/create-git-branch" target="_blank" rel="noreferrer noopener">创建了一个Git分支</a>。在这种情况下，使用<kbd>Undo</kbd>按钮将撤销分支，而不是提交。</p>



<p>要在GitKraken中执行了另一个动作后撤销Git提交，必须使用Git重置特性。只需右击中间图形中的commit，选择<kbd>Reset</kbd> - &gt; <kbd>Soft</kbd>保留所有更改，或者选择<meta charset="utf-8"/>-&gt;-<kbd>Hard</kbd>放弃更改，如果您确定将来不再需要它们的话。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<figure class="wp-block-image size-large"><picture decoding="async" class="wp-image-5597">
<source type="image/webp" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-1024x328.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken.png.webp 1518w" srcset="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%20328'%3E%3C/svg%3E" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="" alt="undo git commit git reset hard soft gitkraken" data-lazy-srcset="https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-1024x328.png 1024w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-300x96.png 300w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-768x246.png 768w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken.png 1518w" data-lazy-sizes="(max-width: 1024px) 100vw, 1024px" data-lazy-src="https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-1024x328.png"/>
</picture>
<noscript><picture decoding="async" class="wp-image-5597">
<source type="image/webp" srcset="https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-1024x328.png.webp 1024w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken.png.webp 1518w" sizes="(max-width: 1024px) 100vw, 1024px"/>
<img decoding="async" src="../Images/a154773516d6701a53918968104bb141.png" alt="undo git commit git reset hard soft gitkraken" srcset="https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-1024x328.png 1024w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-300x96.png 300w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-768x246.png 768w, https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken.png 1518w" sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://www.gitkraken.com/wp-content/uploads/2021/10/undo-git-commit-git-reset-gitkraken-1024x328.png"/>
</picture>
</noscript></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>无论您喜欢使用GUI还是CLI，GitKraken都可以使撤销操作(如撤销上次提交)变得简单而安全，因此您可以对自己的工作流程更有信心。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>在GitKraken CLI中撤销上一次Git提交</strong></h2>



<p>现在，让我们回顾一下如何使用<a href="https://www.gitkraken.com/cli" target="_blank" rel="noreferrer noopener"> GitKraken CLI </a>撤销您的最后一次Git提交。</p>



<p aria-hidden="true" class="wp-block-spacer"><strong>去重置</strong></p>



<h2>与<a href="https://www.gitkraken.com/learn/git/problems/revert-git-commit" target="_blank" rel="noreferrer noopener">恢复Git提交</a>相比，Git重置允许您及时返回到特定的提交，并将您的活动位置重置为选定的提交。使用Git重置，您有两种选择:可以“软”重置Git，也可以“硬”重置Git。</h2>



<p>与<a href="https://www.gitkraken.com/learn/git/problems/revert-git-commit" target="_blank" rel="noreferrer noopener">恢复Git提交</a>相比，Git重置允许您及时返回到特定的提交，并将您的活动位置重置为选定的提交。使用Git重置，您有两种选择:可以“软”重置Git，也可以“硬”重置Git。</p>



<p aria-hidden="true" class="wp-block-spacer">如何撤销上一次提交并保留更改？</p>



<h2>如果您想撤销上一次Git提交，但保留更改，软Git重置将达到目的。使用<code>--soft</code>标志将确保保留未完成修订中的更改。在执行软Git重置后，您可以在工作副本中找到这些未提交的本地修改。如果您使用的是GitKraken CLI，只需输入:</h2>



<p>如果您想撤销上一次Git提交，但保留更改，软Git重置将达到目的。使用<code>--soft</code>标志将确保保留未完成修订中的更改。在执行软Git重置后，您可以在工作副本中找到这些未提交的本地修改。如果您使用的是GitKraken CLI，只需输入:</p>



<p aria-hidden="true" class="wp-block-spacer"><code>$  git reset --soft HEAD~1</code></p>



<p><code>$  git reset --soft HEAD~1</code></p>



<p aria-hidden="true" class="wp-block-spacer">Git重置应该小心使用。比方说，你回到了很久以前的某次犯罪。您一路传递的所有提交现在可能都以悬空状态结束，虽然它们存在，但是没有任何东西引用它们。如果您执行“硬”重置，您可能会丢失没有正确备份的工作。如果您确信不再需要这些更改，您应该只执行硬Git重置。</p>



<p>Git重置应该小心使用。比方说，你回到了很久以前的某次犯罪。您一路传递的所有提交现在可能都以悬空状态结束，虽然它们存在，但是没有任何东西引用它们。如果您执行“硬”重置，您可能会丢失没有正确备份的工作。如果您确信不再需要这些更改，您应该只执行硬Git重置。</p>



<p aria-hidden="true" class="wp-block-spacer"><code>$  git reset --hard HEAD~1</code></p>



<p><code>$  git reset --hard HEAD~1</code></p>



<p aria-hidden="true" class="wp-block-spacer">作为Git的最佳实践，您应该总是避免做任何需要强制推送的事情，这将重写您的主要分支的历史。</p>



<p>作为Git的最佳实践，您应该总是避免做任何需要强制推送的事情，这将重写您的主要分支的历史。</p>



<p aria-hidden="true" class="wp-block-spacer">准备好使用Git革新您的工作流程吧，让GUI和CLI的强大功能触手可及，让您能够根据自己的喜好为每个操作选择最佳工具。<br/></p>



<div class="callout">
<div class="callout-content">
<p>准备好使用Git革新您的工作流程吧，让GUI和CLI的强大功能触手可及，让您能够根据自己的喜好为每个操作选择最佳工具。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>
		</div>
				</div>    
</body>
</html>