<html>
<head>
<title>Learn How to Git Push | Git Push Local Branch to Remote</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>了解如何Git推送| Git推送本地分支到远程分支</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/learn/git/git-push#0001-01-01">https://www.gitkraken.com/learn/git/git-push#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<p>Git push命令将本地更改上传到您的远程存储库。</p>



<p>通常，当使用Git时，您的代码既存在于您计算机上的本地存储库中，也存在于服务器上的一个或多个存储库中。我们称存储在服务器上的回购文件为“<a href="https://www.gitkraken.com/learn/git/git-remote" target="_blank" rel="noreferrer noopener">远程文件</a>”。</p>



<p>Git push会将<a href="https://www.gitkraken.com/learn/git/commit" target="_blank" rel="noreferrer noopener"> Git commits </a>从您的本地存储库上传到您的远程存储库，比如存储在GitHub或GitLab上的repos。Git push通常用在开发工作流中，使本地更改可以在远程访问，以便其他协作者可以获取或提取最新的项目历史。</p>



<p>运行Git push不会覆盖您的原始文件。Git知道哪些提交已经存在于上游分支上，并且将只上传从您的本地存储库中推送的新更改。</p>



<p>在本文中，我们将介绍使用Git push及其相关操作的来龙去脉，包括如何连接到远程存储库，设置默认上游、删除远程分支的利弊，以及如何正确使用Git push force。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>喜欢从CLI推送您的更改吗？GitKraken Client允许您利用终端的速度，同时在同一个窗口中提供可视化提交图。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>Git推送的好处</strong></h2>



<p>您希望将提交推送到远程有两个主要原因:</p>



<ol><li>对您的存储库和分支进行远程备份。大多数Git托管服务本质上充当你的回购的“云备份”。如果你的计算机出了什么问题，你可以放心，你的代码不会永远消失。</li><li>与他人共享您的代码。无论是与您的开发团队共享代码，还是向开源社区公开共享代码，对于开发人员来说，远程推送都是一种共享和协作项目的便捷方式。其他人可以克隆或派生您的repo来查看您的代码并做出更改。根据您使用的Git主机的不同，谁可以访问您的远程设备会有不同的配置。</li></ol>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>连接到远程存储库</strong></h2>



<p>开始一个项目有两种主要的方法。您可以<a href="https://www.gitkraken.com/learn/git/git-clone" target="_blank" rel="noreferrer noopener">克隆一个现有的存储库</a>或者创建一个新的<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-git-repository" target="_blank" rel="noreferrer noopener"> Git存储库</a>。克隆存储库不需要您连接到远程，因为它会自动为您创建一个远程。</p>



<p>然而，如果您在本地机器上使用GitKraken客户端的终端标签中的<code>git init</code>或者通过简单地从GUI中选择<kbd>Start a local repo</kbd>按钮创建了一个新的存储库，您将需要手动连接到一个远程服务器以便上传和共享您的项目。</p>



<p>GitKraken客户端可以在各种流行的托管服务上添加远程存储库，包括<a href="https://www.gitkraken.com/integrations/github" target="_blank" rel="noreferrer noopener"> GitHub </a>、<a href="https://www.gitkraken.com/integrations/gitlab" target="_blank" rel="noreferrer noopener"> GitLab </a>、<a href="https://www.gitkraken.com/integrations/bitbucket" target="_blank" rel="noreferrer noopener"> Bitbucket </a>和<a href="https://www.gitkraken.com/integrations/azure-devops" target="_blank" rel="noreferrer noopener"> Azure DevOps </a>。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>GitKraken客户端集成了许多主要的存储库托管服务，因此您可以花更少的时间尝试连接存储库，而将更多的时间用于编写令人惊叹的代码。<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>要使用<a href="https://www.gitkraken.com/git-client" target="_blank" rel="noreferrer noopener"> GitKraken客户端</a>中的GUI将您的本地项目连接到远程项目，导航到左侧面板，悬停在<kbd>Remote</kbd>上并选择右侧的<kbd>+</kbd>图标。接下来，在顶部选择你想要的远程托管服务。最后，选择<kbd>Create remote and push local refs</kbd>。屏幕左下方将出现一条提示信息“已成功创建回购”。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>您也可以使用URL添加GitKraken客户端的现有遥控器。在以这种方式添加远程之前，您需要在您的托管站点上创建一个远程存储库，这样您就可以访问项目的URL。</p>



<p>项目的URL通常会显示在您首选的托管网站的显著位置，便于访问。要添加现有遥控器，请在GitKraken客户端中执行以下步骤:</p>



<ol><li>从您的存储库托管站点复制URL并返回到GitKraken客户端</li><li>导航到左侧面板，悬停在<kbd>Remote</kbd>上，选择右侧的<kbd>+</kbd>图标</li><li>选择URL并输入项目名称</li><li>将URL粘贴在标有<kbd>Pull URL</kbd>和<kbd>Push URL</kbd>的部分下</li><li>选择<kbd>Add remote</kbd>按钮</li></ol>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>您还可以使用带有<code>remote add</code>命令的<a href="https://www.gitkraken.com/cli" target="_blank" rel="noreferrer noopener"> Git CLI </a>将您的本地存储库连接到远程服务器。要访问GitKraken客户端中的CLI选项卡，请选择位于主工具栏右侧的<kbd>Terminal</kbd>按钮。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>您的屏幕应该看起来像这样:</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size">GitKraken客户端CLI界面，终端在顶部，GUI提交图在底部。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>现在导航到您的托管站点，使用HTTPS或SSH复制远程回购的URL。下面的例子展示了GitHub中URL的例子。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size"><em> GitHub页面，您可以在其中复制远程存储库的URL </em></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>现在您已经有了所有必要的信息，可以将本地repo连接到新创建的remote了。要连接这些回购，请使用:</p>



<p><code>git remote add origin &lt;url of remote&gt;</code></p>



<p>在CLI中，您可以通过运行<code>git remote</code>来仔细检查遥控器是否已连接。您应该看到终端在运行该命令后返回了<code>origin</code>。这意味着您已经成功地将本地项目连接到了远程存储库。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong> Git将本地分支推送到远程</strong></h2>



<p>为了将更改推送到您的遥控器，您需要首先对您的本地存储库进行更改。为了让这些变更处于可以被推送的状态，您需要<a href="https://git-scm.com/docs/git-add" target="_blank" rel="noreferrer noopener">暂存或添加</a>它们，然后提交这些变更。</p>



<p>如果您的本地存储库在远程存储库的“前面”,也就是说本地存储库上的更改还没有反映到远程存储库中，那么您可以验证您确实准备好将更改推送到远程存储库了。在GitKraken客户端中，您可以从GUI的中央提交图中看到您的本地项目是否在远程项目之前。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size"><em> GitKraken客户端提交图</em></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>要使用CLI查看本地是否领先于远程，您需要运行<code>git status</code>。在这种情况下，您可以看到本地在远程之前，因为终端返回了消息:“您的分支在<code>origin/main</code>之前1次提交。”</p>



<p aria-hidden="true" class="wp-block-spacer"><em> GitKraken客户端CLI </em></p>







<p class="has-text-align-center has-small-font-size">现在，您已经准备好将您的更改推送到远程，让我们看看如何使用GitKraken客户端的GUI和CLI进行Git push。</p>



<p aria-hidden="true" class="wp-block-spacer">使用GitKraken客户端的GUI，有3种方法可以推动您的更改:</p>



<p>检查所需的分支，然后选择顶部工具栏中的<kbd>Push</kbd>按钮。</p>



<p>使用带有键盘快捷键<code>command/ctrl + P</code>的命令面板，然后输入“Push”。</p>



<ol><li>右键单击中心图的分支，并从上下文菜单中选择<kbd>Push</kbd>。</li><li>使用带有键盘快捷键<code>command/ctrl + P</code>的命令面板，然后输入“Push”。</li><li>右键单击中心图的分支，并从上下文菜单中选择<kbd>Push</kbd>。</li></ol>



<p aria-hidden="true" class="wp-block-spacer">要使用GitKraken客户端的CLI推送更改，请从顶部工具栏选择<kbd>Terminal</kbd>按钮打开终端选项卡。<a href="https://www.gitkraken.com/learn/git/problems/git-checkout-remote-branch" target="_blank" rel="noreferrer noopener">通过使用<code>git checkout &lt;branch name&gt;</code>检查您想要推送变更的分支</a>。要Git推送您的更改，请使用以下命令:</p>







<p aria-hidden="true" class="wp-block-spacer"><code>Git push &lt;remote name&gt; &lt;branch name&gt;</code></p>



<p>要使用GitKraken客户端的CLI推送更改，请从顶部工具栏选择<kbd>Terminal</kbd>按钮打开终端选项卡。<a href="https://www.gitkraken.com/learn/git/problems/git-checkout-remote-branch" target="_blank" rel="noreferrer noopener">通过使用<code>git checkout &lt;branch name&gt;</code>检查您想要推送变更的分支</a>。要Git推送您的更改，请使用以下命令:</p>



<p><code>Git push &lt;remote name&gt; &lt;branch name&gt;</code></p>



<p aria-hidden="true" class="wp-block-spacer"><strong>设置默认上游分支</strong></p>







<p aria-hidden="true" class="wp-block-spacer">在将变更推送到远程时，有两种截然不同的开发人员工作流。一些开发人员更喜欢<a href="https://www.gitkraken.com/learn/git/problems/git-set-upstream-branch" target="_blank" rel="noreferrer noopener">设置一个默认的上游分支</a>,而其他人则更喜欢手动选择每次将他们的更改推送到哪个分支。</p>



<h3>一些开发人员选择设置默认上游分支的原因是，它消除了推送过程中的一个步骤。他们不必每次都选择将提交推送到哪个远程分支，而是在本地分支和远程分支之间创建一种关系，我们称之为设置默认上游，告诉Git将相关本地分支上的所有更改推送到连接的远程分支。</h3>



<p>如果您想要使用GitKraken客户端的GUI设置上游，只需导航到左侧面板，将鼠标悬停在您想要设置上游的本地分支上，单击省略号图标，然后选择<kbd>Set Upstream</kbd>。</p>



<p>一些开发人员选择设置默认上游分支的原因是，它消除了推送过程中的一个步骤。他们不必每次都选择将提交推送到哪个远程分支，而是在本地分支和远程分支之间创建一种关系，我们称之为设置默认上游，告诉Git将相关本地分支上的所有更改推送到连接的远程分支。</p>



<p><em>为分支选择省略号时可用的下拉选项</em></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size">要使用GitKraken客户端的内置CLI设置上游分支，请在push命令中使用<code>--set-upstream</code>标志。例如，它可能看起来像这样:</p>



<p aria-hidden="true" class="wp-block-spacer"><code>Git push --set-upstream origin main</code></p>



<p>这将建立一个默认的上游分支，Git将自动从这个远程分支向前推和拉。</p>



<p><code>Git push --set-upstream origin main</code></p>



<p>这将建立一个默认的上游分支，Git将自动从这个远程分支向前推和拉。</p>



<p aria-hidden="true" class="wp-block-spacer">这让我们想到了另一个学派:不要设置默认上游。这些开发人员选择手动输入分支名称，每次他们将提交上传到远程时，他们都希望将分支名称推送到该分支。这个过程被一些人认为是一个更有意图的过程，它促进了干净的远程存储库，避免了设置和切换上游带来的麻烦。</p>







<p aria-hidden="true" class="wp-block-spacer">如果您不想设置默认的上游，您可以简单地继续使用前面例子中的push命令。要么使用GUI中的一个推送选项，如<kbd>Push</kbd>按钮，要么使用命令行中的<code>git push &lt;remote name&gt; &lt;branch name&gt;</code>。</p>



<p>这让我们想到了另一个学派:不要设置默认上游。这些开发人员选择手动输入分支名称，每次他们将提交上传到远程时，他们都希望将分支名称推送到该分支。这个过程被一些人认为是一个更有意图的过程，它促进了干净的远程存储库，避免了设置和切换上游带来的麻烦。</p>



<p>GitKraken客户端中神奇的自动建议功能将填充Git push命令的所有可用选项，但是如果您更喜欢使用GUI，您可以通过拖放来实现快速推拉！<br/></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p><strong>删除远程分支</strong></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer">当您开始与各种本地和远程存储库交互时，您可能会遇到需要<a href="https://www.gitkraken.com/learn/git/problems/delete-remote-git-branch" target="_blank" rel="noreferrer noopener">删除远程Git分支</a>的情况。例如，要升级一个干净的存储库，您可能需要删除一个合并到主分支中的远程功能分支。因为远程存储库应该是您和您的团队维护的最准确的工作副本，所以删除远程分支应该小心处理。确保您和您的团队已经进行了有效的沟通，并同意删除有问题的分支。</p>



<h2>使用GitKraken客户端中的GUI，您可以通过简单地导航到左侧面板的<kbd>Remotes</kbd>部分下的<kbd>right-clicking</kbd>远程分支，然后选择<kbd>Delete &lt;branch name&gt;</kbd>来删除远程分支。</h2>



<p>当您开始与各种本地和远程存储库交互时，您可能会遇到需要<a href="https://www.gitkraken.com/learn/git/problems/delete-remote-git-branch" target="_blank" rel="noreferrer noopener">删除远程Git分支</a>的情况。例如，要升级一个干净的存储库，您可能需要删除一个合并到主分支中的远程功能分支。因为远程存储库应该是您和您的团队维护的最准确的工作副本，所以删除远程分支应该小心处理。确保您和您的团队已经进行了有效的沟通，并同意删除有问题的分支。</p>



<p><em>右键点击分支后的下拉选项</em></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size">也许与直觉相反，远程上的分支是用CLI上的Git push命令删除的。要使用CLI删除远程分支，请导航到终端并使用:</p>



<p aria-hidden="true" class="wp-block-spacer"><code>git push -d &lt;remote&gt; &lt;remote branch name&gt;</code></p>



<p>也许与直觉相反，远程上的分支是用CLI上的Git push命令删除的。要使用CLI删除远程分支，请导航到终端并使用:</p>



<p><em>删除GitKraken客户端终端中的Git分支“How-to-example”</em></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size"><strong>什么是Git推力？</strong></p>



<p aria-hidden="true" class="wp-block-spacer"><a href="https://www.gitkraken.com/learn/git/problems/git-push-force" target="_blank" rel="noreferrer noopener">强制推送</a>是Git push命令的变体，是用本地历史覆盖存储在远程存储库中的提交历史的有效方法。使用Git push force时应该非常小心，因为它可能会产生意想不到的后果，包括丢失提交。</p>



<h2>虽然存在强制推送的可接受场景，但它们代表了规范的例外。强制推送不应该成为您工作流的一个正常部分，因为它可能会彻底改变您的远程存储库，这可能会给您和您的团队带来重大问题。</h2>



<p>在GitKraken客户端的GUI中启动强制推送时，会出现一个带有以下选项的横幅:<kbd>Pull (fast forward if possible)</kbd>、<kbd>Force Push</kbd>或<kbd>Cancel</kbd>。如果您100%确定要强制推送，只需选择<kbd>Force Push</kbd>选项。您需要再次选择<kbd>Force Push</kbd>进行确认。这是GitKraken采取的另一项安全措施，以帮助您避免无意的力推。</p>



<p>虽然存在强制推送的可接受场景，但它们代表了规范的例外。强制推送不应该成为您工作流的一个正常部分，因为它可能会彻底改变您的远程存储库，这可能会给您和您的团队带来重大问题。</p>



<p><em>使用GitKraken客户端的GUI强制推送</em></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size">在GitKraken客户端的CLI中使用Git push force同样简单。导航到顶部工具栏中的终端选项卡。点击进入终端，输入<code>git push –force</code>。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<p><em>使用GitKraken客户端的终端强制推送</em></p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p class="has-text-align-center has-small-font-size"><strong>强制推租</strong></p>



<p aria-hidden="true" class="wp-block-spacer">使用<a href="https://git-scm.com/docs/git-push#Documentation/git-push.txt---no-force-with-lease" target="_blank" rel="noreferrer noopener">Git push-force-with-lease</a>是一种利用强制推送的方法，但它也为你提供了更多的安全保障。<code>--force-with-lease</code>标志告诉Git，只有在远程设备上有任何您尚未拉取或获取到本地存储库的更改时，才强制推送。如果Git检测到远程分支上的更改将会丢失或被覆盖，那么强制推送将会失败。</p>



<h2><strong>强制推租</strong></h2>



<p>GitKraken客户端使运行复杂的动作，如力推，安全和容易。另外，autosuggest特性提供了Git命令功能的简要描述，因此您可以更放心地进行编码。<br/></p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p><strong>让你的代码和你自己更进一步</strong></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer">不管你是新手还是Git老手，知道如何有效地使用Git push可以让你开始为项目做贡献。能够对团队的存储库做出有意义的贡献是非常令人鼓舞的。GitKraken Client在此帮助您将令人惊叹的代码推向世界各地的项目。</p>



<h2><strong>让你的代码和你自己更进一步</strong></h2>



<p>不管你是新手还是Git老手，知道如何有效地使用Git push可以让你开始为项目做贡献。能够对团队的存储库做出有意义的贡献是非常令人鼓舞的。GitKraken Client在此帮助您将令人惊叹的代码推向世界各地的项目。</p>
		</div>
				</div>    
</body>
</html>