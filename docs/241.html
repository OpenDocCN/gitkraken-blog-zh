<html>
<head>
<title>Building GitLens for VS Code | By Eric Amodio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为VS代码构建git lens | Eric Amodio</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/gitkon/building-gitlens-vs-code#0001-01-01">https://www.gitkraken.com/gitkon/building-gitlens-vs-code#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"><iframe title="Building GitLens, a VSCode App - by Eric Amodio" src="https://www.youtube.com/embed/GAmZgzqJKgY?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">视频</iframe></p></figure>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>您准备好增强Visual Studio代码的Git功能了吗？无缝导航Git repos，让代码作者一目了然。<br/></p>
<a href="/gitlens" class="button button--basic">Install GitLens Free</a>
</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>在2021 <a href="https://gitkon.com/" target="_blank" rel="noreferrer noopener"> GitKon Git conference </a>上，Eric Amodio分享了他构建GitLens的旅程，Git lens是一款VS代码应用，全球有超过1000万开发者使用。<br/> <br/>很久以前，Eric在一家公司工作，为web开发构建所见即所得的应用程序。虽然他有一些版本控制的经验，使用过像<a href="https://en.wikipedia.org/wiki/Microsoft_Visual_SourceSafe" target="_blank" rel="noreferrer noopener">微软Visual SourceSafe </a>、<a href="https://subversion.apache.org/" target="_blank" rel="noreferrer noopener"> Apache Subversion、【SVN】</a>和<a href="https://www.microfocus.com/en-us/products/starteam/overview" target="_blank" rel="noreferrer noopener"> Borland的StarTeam </a>这样的工具，但是他加入的团队没有在他们的项目中使用过源代码控制。相反，他们只是手动共享文件。</p>



<p>随着埃里克的加入，他推动他们采用SVN，这是他们的斗争。与此同时，Git刚刚出道，开始成为一个成熟的玩家。随着时间的推移，他和他的团队研究了很多分布式配置管理工具，但是当他们比较了Git和SVN的时候，他们发现Git成为了事实上的领导者。Git是开源的，并且有一个很好的社区围绕着它，这一事实促使他们从SVN迁移到T2的Git T3。虽然有很高的学习曲线，但是Git的强大和多功能性让他们很高兴采用了它。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>遇到VS代码</strong></h2>



<p>Eric最初是一名开发人员，在学校学习汇编语言，这让他对编程失去了兴趣。然后，他发现了<a href="https://docs.microsoft.com/en-us/dotnet/visual-basic/" target="_blank" rel="noreferrer noopener">微软Visual Basic </a>并坠入爱河。他觉得自己有能力迅速将事情变成现实，将伟大的想法变成现实。</p>



<p>从那里，他继续前进。NET，看着<a href="https://en.wikipedia.org/wiki/Integrated_development_environment" target="_blank" rel="noreferrer noopener">ide</a>，像<a href="https://visualstudio.microsoft.com/" target="_blank" rel="noreferrer noopener"> Visual Studio </a>越来越重，越来越大。在涉猎了Sublime Text和其他ide之后，VS Code首映；埃里克认为它很美。VS代码部分的开放性意味着他可以打开<a href="https://www.gitkraken.com/reports/best-developer-tools-2021" target="_blank" rel="noreferrer noopener">开发工具</a>并调整内部。</p>



<p>在早期，Eric发现了VS代码的一些文件共享方面的问题。他能够自己调试问题，并给VS代码团队发了一封电子邮件，附上他的补丁。就在第二天，他的补丁出现在了VS代码发布中，这是他与VS代码社区合作的第一次正面体验。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>不久之后，VS代码完全开源并引入了扩展模型。这是Eric最感兴趣的地方，因为不必改变整个应用程序来做你想做的事情，比如使用TypeScript，你可以逐渐地添加东西。基本上，代码会在你所在的地方遇到你。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>【GitLens的创意</h2>



<p>Visual Studio有一个名为CodeLens的系统，它在IDE中的代码上方给出很少的注释。这些注释描述了代码和其他各种元数据的作者。VS Code公开了CodeLens API，给了Eric尝试各种可能用例的机会。他的第一个想法是看看是否可以从Git获得信息，并在VS代码中显示。这就是<a href="http://gitkraken.com/gitlens" target="_blank" rel="noreferrer noopener"> GitLens </a>如何开始的，只是玩玩Git和VS代码，看看什么是可能的。<br/> <br/> GitLens的口号是:“GitLens增强了Visual Studio代码中内置的Git功能。”VS代码有自己内置的Git提供程序，支持查看和提交您的更改。您还可以创建、查看和切换分支，但是总的来说，在执行Git操作时，VS代码相当有限。<br/> <br/> Eric想在VS代码中直接公开一个文件的Git历史。对于许多开发人员来说，行内代码注释基本上是不存在的。开发人员很少在代码库中添加对他们工作的解释来解释他们的选择和工作。它让合作者猜测为什么做出某些选择，以及某些代码行做了什么。然而，这些开发人员经常会留下像样的Git提交消息。回溯历史，看看事情是如何演变成现在这个样子的能力是非常强大的。如果您不知道事情是如何或为什么发展到某一点的，那么错误和问题的风险就会增加。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="wp-block-image"><figure class="aligncenter"><img decoding="async" src="" alt="GitLens exposing a commit message associated with the last change on a file" data-lazy-src="https://lh5.googleusercontent.com/phRElhoH4bn05dWZ-h-VvnX0PoRhsmE3SG9Sm58kQYnisSx_UTub61s7F9m79jV02G3TqWMYhoA651xlouZWIAyIB6rJH0QgJMOAAUuQA3Bb-4U5Yz9pBTlnX14SsNahpOUUy8YZ=s1600"/><noscript><img decoding="async" src="../Images/ca9f9b74fe6bf742c9016a3be69996a9.png" alt="GitLens exposing a commit message associated with the last change on a file" data-original-src="https://lh5.googleusercontent.com/phRElhoH4bn05dWZ-h-VvnX0PoRhsmE3SG9Sm58kQYnisSx_UTub61s7F9m79jV02G3TqWMYhoA651xlouZWIAyIB6rJH0QgJMOAAUuQA3Bb-4U5Yz9pBTlnX14SsNahpOUUy8YZ=s1600"/></noscript></figure></div>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>更好地理解您的代码。GitLens提供了VS代码中遗漏的Git回复的可视化。<br/></p>
<a href="/gitlens" class="button button--basic">Install GitLens Free</a>
</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>这种历史资料传统上是很难挖掘出来的。Eric希望释放Git存储库内部的能量，并获得这些有用的信息，将其带到最前沿。这是GitLens的主要目标。为了使可视化您的<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-git-repository" target="_blank" rel="noreferrer noopener"> Git库变得非常容易，</a>无缝地导航您的项目历史，并且能够更容易地定位诸如特定提交之类的事情。Eric真的想帮助开发人员理解为什么事情会变成现在这样，以及它们是如何随着时间的推移而改变的。</p>



<p>这一切都始于一个简单的问题:有人可以通过CodeLens对任何文档进行洞察吗？例如，是否有人可以打开一个文件，查看谁修改了文件，并准确显示出发生了什么变化，以及为什么发生了变化？Eric认为，如果API允许他在一行代码周围公开Git提交消息，那么GitLens就可以真正赋予开发人员权力。例如，如果您正在调试您的应用程序，并且看到一个两年都没有改变的函数，这就给了您一个线索，也许这不是寻找新出现的问题的原因的地方。但是如果一个函数昨天发生了变化，也许那是开始调试新问题的正确地方。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong> GitLens和解决问题</strong></h2>



<p>因为您通过VS代码与GitLens交互，所以您不必从编辑代码切换到与Git存储库交互。所呈现的信息与您正在处理的代码行是上下文相关的。无论你的光标在屏幕上的哪个位置，都会显示谁最后修改了选中的行，同时显示该行的<a href="https://www.gitkraken.com/learn/git/git-diff" target="_blank" rel="noreferrer noopener"> Git Diff </a>,并显示它是多久前被修改的。</p>



<p>所有相关的历史信息都在VS代码中，这意味着您不必去寻找它们。它很大程度上是不引人注目的，留在后台，直到你真的想要它。当你真的需要它的时候，它很容易浮出水面，在你所在的地方与你相遇，把你的历史的上下文视图带到你正在工作的文件中的代码。Eric还想构建一个更丰富的客户端来洞察整个存储库，让你能够看到自己的分支，并深入到任何一个<a href="https://www.gitkraken.com/learn/git/branch" target="_blank" rel="noreferrer noopener"> Git分支</a>中，查看变化。他希望能够实时查看更改并比较提交，将众多更改浓缩起来，只查看分支中发生更改的文件集。这让您可以快速查看和检查随着时间的推移发生了什么变化。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>GitLens为VS代码添加了强大的功能，允许您比较存储库中的任意两点，而无需切换上下文。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong> GitLens和Git合并冲突</strong></h2>



<p>Eric的动机是让<a href="https://www.gitkraken.com/learn/git/tutorials/how-to-resolve-merge-conflict-in-git" target="_blank" rel="noreferrer noopener"> Git合并冲突更容易解决</a>。虽然VS代码确实为合并冲突提供了一些帮助，但是还可以做得更多。目前，在冲突的情况下，无论是来自<a href="https://www.gitkraken.com/learn/git/problems/git-rebase-vs-merge" target="_blank" rel="noreferrer noopener">合并还是</a>重置，都没有足够的默认上下文。GitLens为每个文件提供了信息，让你在发生<a href="https://www.gitkraken.com/learn/git/problems/merge-git-branch#:~:text=How%20do%20you%20merge%20a%20Git%20branch%20with%20master%20in,master%20from%20the%20context%20menu." target="_blank" rel="noreferrer noopener"> Git合并</a>之前很容易看到不同之处。它可以很容易地看到提议的更改，只需拉进解决给定问题的个别行。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<div class="callout">
<div class="callout-content">
<p>如果您现在需要帮助解决合并冲突，GitKraken可以通过有用的可视化上下文帮助您完成解决过程。更不用说:如果你和一个团队成员同时处理同一个文件，GitKraken会提醒你潜在的合并冲突。🤯<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>git lens的未来</strong></h2>



<p>GitLens的未来是让Git 的难用但<a href="https://www.gitkraken.com/git-client/powerful-git-features" target="_blank" rel="noreferrer noopener">强大的特性更容易使用，比如合并冲突解决和查看分支之间的差异。GitLens能够可视化这些特性，但是只能在树形视图中，与你已经在看的地方分开。试图将两种不同的观点联系起来可能会导致一点认知上的不协调，所以Eric的目标是将这些观点拉近，以进一步减少上下文切换。</a></p>



<p>GitLens有一些按钮，可以让你浏览一个回购的历史，并查看以前的提交。但是，如果您不确定到底要搜索哪个提交或特定的代码行，这可能会令人困惑。在未来，Eric希望GitLens展示一些比之前的提交更有意义的东西。这可能包括像时间线这样的东西，在那里你可以看到对文件进行某些更改的时间点的“大气泡”。理想情况下，这将让你快速识别并在最感兴趣的点之间跳转。</p>



<p aria-hidden="true" class="wp-block-spacer"/>







<p aria-hidden="true" class="wp-block-spacer"/>



<p>GitLens也在努力整合工作树。这目前是Git的一个迟钝的特性，但是在适当的情况下，可能非常有价值。如果GitLens可以提供多种视图，并在它们之间无缝切换，那么当你想同时处理多件事情时，你可以隐藏你的更改并切换分支。</p>



<p>这对开发人员来说是一个难题，他们需要暂停，然后隐藏或重置他们当前的工作，去修复一个bug或其他出现的问题。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong> GitLens功能更多人应该利用</strong></h2>



<p>在GitLens中，比较非常重要，但在Eric看来，这一点没有得到充分利用。能够看到不同分支或不同时间点之间的比较，并快速查看任何一组变更是非常强大的。</p>



<p>当查看<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-a-pull-request-in-git" target="_blank" rel="noreferrer noopener"> Git pull请求</a>时，您可以查看pull请求中的每个单独的提交，或者您可以查看作为一个整体被更改的文件集。在GitLens中，您可以通过比较任意两点来设置更改后的集合视图的特定版本。从单个视图中，您可以看到提交和包含提交的更改的文件集。</p>



<p>GitLens还有一个Git命令调色板。VS代码有一个命令面板，您可以在其中打开和执行VS代码命令。GitLens有一个Git命令面板，可以让你调出并执行<a href="https://www.gitkraken.com/learn/git/commands" target="_blank" rel="noreferrer noopener"> Git命令</a>，提供引导式体验。例如，如果你想<a href="https://www.gitkraken.com/learn/git/problems/create-git-branch" target="_blank" rel="noreferrer noopener">创建一个Git分支</a>:</p>



<p aria-hidden="true" class="wp-block-spacer">打开命令选项板</p>



<ol><li>键入并选择<code>git branch</code>，然后选择<code>create</code>选项。</li><li>选择您要从哪个回购和哪个分支创建新分支</li><li>添加新分支的名称，VS代码会为您创建它。</li><li>Add the name of the new branch and VS Code creates it for you.</li></ol>



<p aria-hidden="true" class="wp-block-spacer">GitLens命令面板提供了一个很好的Git命令向导，展示了不同的可用选项。</p>



<p>The GitLens command palette gives a nice guided tour through Git commands exposing the different options available.</p>



<p aria-hidden="true" class="wp-block-spacer"><strong>为VS代码构建git lens</strong></p>



<h2>VS代码API被有意锁定，以确保它是健壮的，经得起时间的考验，不会对性能造成负面影响。这些年来，VS代码团队已经花了很多时间来扩展API的功能，并且接口变得越来越容易使用。现在，您可以托管web视图并自己控制UI和UX，超越最初提供的锁定视图和代码。<br/> <br/>在开始使用VS代码时，一定要意识到可能会有一定的挑战。API的功能仍然有限制。在开始时，您应该检查您感兴趣的领域是否已经存在API。这可以帮助您避免对API如何完成某些事情的误解感到沮丧。由于API的锁定特性，它的表面积较小，因此您必须在组合构件的方式上有所创新。一旦你完全理解了事物真正是如何工作的以及极限在哪里，你就可以构建一些真正有趣和强大的东西。</h2>



<p>API拥有强大的工具来构建像VS代码文件系统抽象这样的东西。这些抽象让您可以构建真正丰富的元素，这正是GitLens在Git之上构建文件抽象所依赖的。通过访问特定的结构化URI来查找历史中的特定文件，GitLens可以利用整个文件系统。这些API内置了很多功能，让您可以想象任何事情，并且约束非常有助于帮助您理解您可以做什么。它们还确保您实现的东西是好的和高性能的，让您一路思考UX。</p>



<p>The API has powerful tools for building things like the VS Code file system abstractions. These abstractions let you build really rich elements, which is what GitLens relies on to build the file abstraction on top of Git. By going to a specific, structured URI for a particular file in history, GitLens can then leverage the whole file system. There’s a lot of power built into these APIs that let you envision just about anything, and the constraints are very helpful to help you understand what you can do. They also ensure that what you implement is nice and performant, making you think about the UX along the way.</p>



<p aria-hidden="true" class="wp-block-spacer"><strong>参与GitLens和VS代码</strong></p>



<h2>对于那些希望加入GitLens和VS代码社区的人，Eric为扩展作者运营了一个<a href="https://aka.ms/vscode-dev-community" target="_blank" rel="noreferrer noopener"> Slack社区</a>。欢迎所有人加入，提出问题，并会见其他作者，这是开始VS代码贡献并找到您想要做的事情的可能示例的好方法。问问题和使用VS Code API是找到方法的好方法，因为它非常容易访问、调试和使用。<br/> <br/>甚至有一个用于VS代码的<a href="https://yeoman.io/" target="_blank" rel="noreferrer noopener">自耕农生成器</a>，它将为你搭建一个项目。这让您可以快速完成设置，并且可以很容易地帮助调试和测试。</h2>



<p>For those looking to get involved in the GitLens and VS Code community, Eric runs a <a href="https://aka.ms/vscode-dev-community" target="_blank" rel="noreferrer noopener">Slack community</a> for extension authors. All are welcome to join, ask questions, and meet other authors, which is a good way to get started with VS Code contributions and find possible examples of what you want to do. Asking questions and playing around with the VS Code API is a great way to find your way, as it’s pretty accessible, easy to debug, and use.<br/><br/>There is even a <a href="https://yeoman.io/" target="_blank" rel="noreferrer noopener">Yeomen generator</a> for VS Code that will scaffold out a project for you. This lets you quickly get through setup, and can help debug and test things out quite easily. </p>



<p aria-hidden="true" class="wp-block-spacer"><strong>Git的未来是可见的</strong></p>



<h2>Eric认为，Git的未来是更好的可视化。你可以<strong> <a target="_blank" href="https://youtu.be/GAmZgzqJKgY?t=1871" rel="noreferrer noopener">跳到他演讲的最后</a> </strong>去听更多他对Git和整个科技行业未来的想法。</h2>



<p>在GitKon之后不久，<a target="_blank" href="https://www.gitkraken.com/blog/gitkraken-acquires-gitlens-for-visual-studio-code" rel="noreferrer noopener"> GitKraken收购了GitLens </a>，Eric加入GitKraken担任新的首席技术官，领导继续开发<strong> <a target="_blank" href="http://gitkraken.com/gitlens" rel="noreferrer noopener"> GitLens </a> </strong>和GitKraken广受欢迎的<strong> <a target="_blank" href="http://gitkraken.com/git-client" rel="noreferrer noopener"> Git客户端</a> </strong>。通过与GitKraken合作，Eric现在全职专注于GitLens，GitLens获得了一家领先软件公司的全力支持和资源，该公司专门为开发团队提供Git协作和生产力解决方案。</p>



<p>下载免费的<strong> <a target="_blank" href="https://www.gitkraken.com/git-client" rel="noreferrer noopener"> GitKraken Git客户端</a> </strong>以利用桌面上的可视化Git GUI和<strong> <a target="_blank" href="https://www.gitkraken.com/cli" rel="noreferrer noopener"> CLI </a> </strong>的功能，并且<a target="_blank" href="https://gitlens.amod.io/" rel="noreferrer noopener"> <strong>安装</strong> <strong> GitLens </strong> </a>以免费访问VS代码中Git的功能。</p>



<p>Download the free <strong><a target="_blank" href="https://www.gitkraken.com/git-client" rel="noreferrer noopener">GitKraken Git client</a></strong> to leverage the power of a visual Git GUI and <strong><a target="_blank" href="https://www.gitkraken.com/cli" rel="noreferrer noopener">CLI</a></strong> on your desktop, and <a target="_blank" href="https://gitlens.amod.io/" rel="noreferrer noopener"><strong>install</strong> <strong>GitLens</strong></a> for free to access the power of Git in VS Code.</p>



<p/>
		</div>
				</div>    
</body>
</html>