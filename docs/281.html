<html>
<head>
<title>How NodeGit and libgit2 Power GitKraken | Free Git GUI Download</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>NodeGit和libgit2如何增强GitKraken |免费Git GUI下载</h1>
<blockquote>原文：<a href="https://www.gitkraken.com/blog/nodegit-libgit2#0001-01-01">https://www.gitkraken.com/blog/nodegit-libgit2#0001-01-01</a></blockquote><div><div class="elementor-widget-container">
			
<h2><strong>为GitKraken提供动力的喷气发动机</strong></h2>



<p>我们从第一次试用GitKraken Git GUI的人那里听到的一个常见问题是“撤销和重做按钮是如何工作的？”如果你习惯于只使用CLI，或者只在后台运行<a href="https://www.gitkraken.com/learn/git/commands" target="_blank" rel="noreferrer noopener"> Git CLI命令</a>的GUI，这可能看起来像某种奇怪的巫术。</p>



<p>这背后真正的技术，以及GitKraken所有的了不起之处，不是魔术，而是开源技术。支持许多其他Git项目的相同开源技术。它被称为NodeGit，我们非常兴奋地告诉你关于它的一切。</p>



<div class="callout">
<div class="callout-content">
<p>使用由NodeGit支持的GitKraken的撤销和重做按钮，使您的Git工作流程更快更安全！<br/></p>

</div>
</div>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>不带命令行的Git</strong></h2>



<p>在git-scm.com官方手册的后面，你会发现一个叫做<a href="https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain" target="_blank" rel="noopener">“管道和瓷器”</a>的章节。本章分解了Git软件如何在内部运行(“管道”)以及人和代码如何与它交互(“瓷器”)。通常，在为Git开发功能时，软件会执行运行Git“瓷器”API的子进程，并解析标准输出流的结果。</p>



<p>这可能是非常低效的。当执行CLI命令时，Git需要与底层存储库数据库进行交互，它上面的软件必须通过文本解析重新解释检索到的结果。</p>



<p>幸运的是，我们可以完成基于Git的版本控制，而不直接依赖Git的软件来实现。Git提供了一组如何操作文件系统和跟踪随时间变化的协议和标准，以及一组使用这些协议的预打包的CLI命令。</p>



<p>对于那些可能是计算机科学新手的人来说，协议指的是类似于简单邮件传输协议(SMTP)的东西。协议本身不是电子邮件，而是电子邮件如何在计算机之间发送。因此，无论你更喜欢Outlook、iCloud、Gmail还是AOL，你都可以发送和接收电子邮件，因为所有工具都使用相同的标准。</p>



<p>那么，GitKraken如何在没有CLI的情况下利用Git呢？</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>libgit 2——Git的开源库</strong></h2>



<p>这就是libgit2的用武之地。libgit2是一个流行的开源库，用于与git交互，但作为一个新的实现，它不需要Git管道或瓷器命令。该项目将自己描述为<em>“Git核心方法的一个可移植的纯C实现，作为一个具有可靠API的可重入可链接库提供，允许你用任何支持C绑定的语言编写本地速度的定制Git应用程序。”</em></p>



<p>这是一个很棒的项目，但是我们知道的大多数开发人员并不特别喜欢用c语言工作。</p>



<p>如果你从未直接使用过C语言，你并不孤单。这是一种非常有效和强大的语言。但是，就像后来的C++一样，它对专家非常友好，但对用户不太友好。这就是为什么这么多开发人员喜欢使用Python、PHP和JavaScript等语言，包括Node。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2>【Node呢？</h2>



<p>在GitKraken，我们热爱Node！我们传奇的跨平台Git GUI，可免费下载，作为T2电子应用程序跨平台交付。为了在Node中有效地使用libgit2，我们需要一种方法来处理相同的API，而不需要重写和维护Node中的整个库。这就是我们故事中的主人公出现的地方。</p>



<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>为胜利而努力</strong></h2>



<p>NodeGit是一个开源项目，任务是为libgit2项目提供节点绑定。简而言之，NodeGit管理一个小得多的模板文件集，这些模板文件解析libgit2的文档以生成Node可以访问的代码。这是一个相当深奥的解释，所以让我们后退一步。<br/> <br/>如果你看看libgit2的代码库，有超过100，000行代码。让我们来看看为什么这是如此巨大。</p>







<p>每个Git命令实际上都需要几组小步骤。例如，<code>git add</code>需要3个基本步骤:</p>



<ol><li>根据文件内容计算SHA-1。</li><li>将文件内容存储在位于的存储库数据库中。git/对象</li><li>将文件内容注册到。git/索引</li></ol>



<p aria-hidden="true" class="wp-block-spacer"/>



<p>可以想象，执行非常复杂的任务，如<a href="https://www.gitkraken.com/learn/git/git-rebase" target="_blank" rel="noreferrer noopener"> Git rebase </a>或<a href="https://www.gitkraken.com/learn/git/cherry-pick"> Git cherry pick </a>会有更多的步骤，尤其是当您考虑到每个命令有几十个选项时。</p>



<p>尝试手动重写从C到Node的所有代码，然后尝试在每次更新时手动更新它，这将是一项艰巨的任务。因此，NodeGit维护了一个小得多的代码库，大约6000行，可以查找和解析libgit2的文档，以生成我们可以在Node而不是c中运行的代码。当您在GitKraken接口中拖放它们时，新代码会以正确的顺序进行完全相同的API调用，以完成类似于<a href="https://www.gitkraken.com/learn/git/tutorials/what-is-git-pull"> Git pull </a>或<a href="https://www.gitkraken.com/learn/git/commit"> Git commit </a>的任务。</p>







<p>为什么这对GitKraken如此重要是因为它允许我们在这些调用中插入自己的函数。这就是让我们给用户一个撤销按钮或者其他任何GitKraken Git GUI 的独特功能！</p>







<p aria-hidden="true" class="wp-block-spacer"/>



<h2><strong>未来是北海巨妖</strong></h2>



<p>我们非常自豪能够成为这个项目的维护者，这个项目正被世界各地如此多的软件产品所利用。NodeGit让我们在GitKraken中做一些非常棒的事情，并让我们有能力做更酷的事情。我们也很自豪地支持开源社区。最终，我们希望帮助Git改进，并帮助地球上的每一个Git用户以一种更加透明、可靠和高效的方式管理他们的工作。</p>



<p>如果您还没有了解GitKraken Git GUI 所提供的功能，那么现在就是您的机会。</p>



<div class="callout">
<div class="callout-content">
<p>“谢谢@GitKraken的撤销功能。不小心丢弃了我所有的更改，但现在它们又回来了😁"–<a href="https://twitter.com/offset1337/status/1107615811181658118" target="_blank" rel="noopener">@ offset 337</a><br/><br/>怪怪会保护你不受自己的伤害。<br/></p>

</div>
</div>



<p/>
		</div>
				</div>    
</body>
</html>