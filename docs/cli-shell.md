# CLI 简介:定制您的 CLI Shell

> 原文：<https://www.gitkraken.com/blog/cli-shell>

点击下面阅读我们 CLI 简介系列的其他文章:

到目前为止，在本系列中，您已经了解了为什么理解如何使用命令行、一些命令行基础知识和 [shell 命令](https://www.gitkraken.com/blog/shell-commands)，以及所有关于运行基于 CLI 的应用程序和[命令行工具](https://www.gitkraken.com/blog/command-line-tools)的重要性。在 CLI 简介系列的这一部分中，您将学习定制 shell 用户体验的基础知识。

在 CLI 简介系列的这一部分中，我们将重点关注:

## **定制您的 CLI Shell**

您可以完全控制 CLI shell 的外观。从改变提示变量到改变配色方案，再到制作自己的快捷方式，有很多方法可以配置用户体验。为了开始这条定制路线，让我们首先看看 CLI shell 配置一般是如何工作的。

无论你如何定制你的终端体验，你都会爱上在 GitKraken 客户端使用 GitKraken CLI！令人敬畏的提交图形可视化加上 Git CLI 触手可及。

### CLI Shell 的配置文件

像 Zsh 和 Bash 这样的 CLI shells 只是运行在操作系统之上的程序。就像任何其他程序一样，您可以根据自己的需要对它们进行配置。

Zsh 和 Bash 都以特定的顺序从特定的文件中加载配置，但是我们将把重点放在 Zsh 的`.zshrc`或者 Bash 的`.bashrc`上。这两个文件都存储在您的$HOME 文件夹中，如果您在没有其他选项的情况下执行`cd`，您将会到达这个文件夹。

当您打开新的终端窗口时，终端模拟器会加载 CLI shell 的配置。您可以在终端中启动四种 shell 会话；最常见的是“交互式、非登录外壳”，您可能会每天使用它。

让我们快速仔细地看一下这四种可能的状态。

#### **交互式外壳 vs 非交互式外壳**

每次在终端中输入内容时，您都使用了交互式 shell。这是终端打开的默认 shell 类型，如果你点击桌面上的某个东西或者在编辑器中打开内置的终端，比如 VS Code。

非交互式 shell 由程序(如 shell 脚本)打开和使用，不接受用户从键盘输入。如果你曾经打开一个程序，短暂地瞥见一个终端窗口打开，打印一些东西，然后立即关闭，那么你已经看到了一个非交互的 shell 在工作。

#### **登录与非登录 Shell**

在本系列关于 [shell 命令](https://www.gitkraken.com/blog/shell-commands)的第二部分中，我们看到的第一个命令是`whoami`。知道终端认为你是谁很重要，因为终端会根据这些信息做出不同的行为。

打开终端模拟器时——像 GitKraken 客户端、iTerm 或 Gnome 终端中的终端标签——操作系统已经知道你是谁，你就不用再登录了。终端为您提供一个交互式的非登录 shell，并从您的`.zshrc`文件中加载配置。

第一次打开 SSH 连接或原生 CLI shell 时，比如只有命令行的 Linux 会话，终端需要你登录。这时您将有一个交互式登录会话，shell 将从您的`.zshprofile`加载配置。

在本文中，我们将与`.zshrc`一起工作；这是因为您几乎总是在使用交互式非登录 shell，但是了解 shell 的配置是从哪里加载的是有好处的，尤其是在您使用脚本和 CI/CD 工具时。

在 VS 代码终端加载交互会话？GitLens+使该会话在另一个层面上具有交互性！单击以与 shell 中列出的任何 Git 散列、分支或标记进行交互。立即开始使用 GitLens+。

[Sign Up for GitLens+](https://www.gitkraken.com/gitlens/plus-features)

### **定制提示**

您可以通过多种方式自定义命令提示符。到目前为止，我们展示的几乎所有示例中的默认提示配置都使用了模式:`username@hostname current-directory %`。

`hostname`只是你登录的电脑的名称。要改变这一点，您需要更改“提示变量 1”的值，在 Zsh 中称为`PROMPT`，在 Bash 中称为`PS1`。

您可以设置提示变量来打印任何常规字符串或单个字符，如您的姓名、自定义消息或' $ '。有大量预定义的提示变量设置可供您选择来填充动态值，包括当前日期和时间、目录的完整路径、完整主机名和许多其他选项。虽然非常相似， [Zsh 提示变量选项](https://zsh.sourceforge.io/Doc/Release/Prompt-Expansion.html)在格式和细节上与 [Bash 提示变量选项](https://www.gnu.org/software/bash/manual/html_node/Controlling-the-Prompt.html)有所不同。

例如，让我们将 Zsh 中的提示改为使用格式`date current-directory ~ $`

1.打开或创建您的`~/.zshrc`文件。它可能已经存在，但是如果没有，您可以使用`touch ~/.zshrc`或者通过您喜欢的文本编辑器来创建它。该文件将保存在您的$HOME 目录中。

2。在`.zshrc`文件的顶部，添加下面一行:

`export PROMPT='%D %1/ ~ $`

如果你正在使用 Bash，你在你的`~/.bashrc`文件中设置这一行:

`export PS1="\d \W ~ $"`

3.保存文件。

4。打开一个新的终端窗口。

5。庆祝一下！

#### **给你的提示着色**

您可以给 Zsh 提示变量添加一点颜色，使您的提示变量更容易阅读，匹配您的桌面背景，或者只是增加您的终端体验。

默认情况下，Zsh 支持黑色、红色、绿色、黄色、蓝色、青色和白色。

要布置你的提示变量，完成以下步骤:

1 .打开您的`~/.zshrc`文件。

2.将`%F{color}`加到任何提示变量的前面，将`%f`加到另一边。用支持的颜色之一替换颜色。

例如，要将你的提示修改成如上图的样子，使用:

`export PROMPT='%F{red}%D%f %F{green}%1/%f %F{cyan}~%f %F{yellow}$%f`

3。保存文件。

4。打开一个新的终端窗口。

**Zsh 主题**

#### 您可以在提示中添加更多的装饰，并创建完整的 Zsh 主题。虽然我们不打算在这里深入讨论创建 Zsh 主题，但是知道什么是可能的还是有好处的。

有多个致力于 CLI shell 主题的开源项目，可以轻松地按照您想要的方式配置提示符。我们建议查看一下 [Oh My Posh](https://ohmyposh.dev/) 主题，这是一个适用于任何 CLI shell 的提示主题引擎。

有多个致力于 CLI shell 主题的开源项目，可以轻松地按照您想要的方式配置提示符。我们建议查看一下 [Oh My Posh](https://ohmyposh.dev/) 主题，这是一个适用于任何 CLI shell 的提示主题引擎。

无论您如何设计您的 shell 体验，如果您正在使用 VS 代码，GitLens+可以释放 Git 的力量，使您的终端体验更加健壮。

无论您如何设计您的 shell 体验，如果您正在使用 VS 代码，GitLens+可以释放 Git 的力量，使您的终端体验更加健壮。

[Sign Up for GitLens+](https://www.gitkraken.com/gitlens/plus-features)

**用别名制作自己的快捷方式**

### 您可以在`.zshrc`文件中做的另一件事是设置别名。别名是您为简化常见任务而定义的快捷方式。别名的设置非常简单，从长远来看，可以节省您大量的输入。

别名总是遵循同一个简单的公式:

`alias command='other commands you want to run'`

就是这样。

比如，我们在这个系列中就用了很多`ls -a`。您可以通过在您的`.zshrc`文件中添加下面一行来将其缩短为`la`:

`alias la='ls -a'`

记住保存并启动一个新的终端窗口，以使配置更改生效。

您可以在`.zshrc`文件中做的另一件事是设置别名。别名是您为简化常见任务而定义的快捷方式。别名的设置非常简单，从长远来看，可以节省您大量的输入。

别名总是遵循同一个简单的公式:

`alias command='other commands you want to run'`

就是这样。

比如，我们在这个系列中就用了很多`ls -a`。您可以通过在您的`.zshrc`文件中添加下面一行来将其缩短为`la`:

`alias la='ls -a'`

记住保存并启动一个新的终端窗口，以使配置更改生效。

我们推荐的另一个常见选项是在删除文件夹或文件时使用交互模式。要使这成为您的终端的默认行为，在您的`.zshrc`文件中添加下面一行:

`alias rm='rm -i'`

我们推荐的另一个常见选项是在删除文件夹或文件时使用交互模式。要使这成为您的终端的默认行为，在您的`.zshrc`文件中添加下面一行:

`alias rm='rm -i'`

关于别名有一点需要注意:别名可以覆盖现有命令的行为，如上面的例子所示。这是因为`.zshrc`文件是终端在打开 CLI shell 的新实例时最后读取的内容之一；从该文件加载的任何内容都优先于任何默认行为。

终端假设您知道自己在做什么，所以在设置替身时要小心使用命令名。在使用它作为别名之前，看看是否有任何字符组合的手动输入不失为一个好主意。

您可能会发现最后一个有用的例子是`git push origin main`，大多数开发人员最终会输入很多很多次。如果您将`git push origin main`设置为 CLI 别名`gpom`，您可以避免每次执行此操作时键入 16 个字符！

要使用`gpom`别名，将其添加到您的`.zshrc`文件中:

`alias gpom='git push origin main'`

使用别名还可以做很多事情，比如创建函数和后缀。有很多很棒的[指南可以让你了解更多关于 CLI 别名](https://www.thorsten-hans.com/5-types-of-zsh-aliases)的知识。您会发现，从长远来看，您对 CLI 别名了解得越多，节省的时间就越多。

使用别名还可以做很多事情，比如创建函数和后缀。有很多很棒的[指南可以让你了解更多关于 CLI 别名](https://www.thorsten-hans.com/5-types-of-zsh-aliases)的知识。您会发现，从长远来看，您对 CLI 别名了解得越多，节省的时间就越多。

**每次新外壳打开时运行的命令**

### 到目前为止，我们添加到`.zshrc`文件中的所有东西都是命令，包括导出自定义提示变量和设置 CLI 别名。配置文件按照列出的顺序从上到下运行命令。但是，如果每次打开一个新的 shell 时都想运行某些命令，可以将它们列在`.zshrc`或`.bashrc`文件中。

例如，如果您想显示当前的工作目录并列出新 shell 打开的目录的内容，您可以添加以下内容:

`pwd && ls`

到目前为止，我们添加到`.zshrc`文件中的所有东西都是命令，包括导出自定义提示变量和设置 CLI 别名。配置文件按照列出的顺序从上到下运行命令。但是，如果每次打开一个新的 shell 时都想运行某些命令，可以将它们列在`.zshrc`或`.bashrc`文件中。

例如，如果您想显示当前的工作目录并列出新 shell 打开的目录的内容，您可以添加以下内容:

`pwd && ls`

这里的`&&`是如何告诉 CLI shell 在同一行上运行两个命令。这等同于按顺序运行每个命令。

这里的`&&`是如何告诉 CLI shell 在同一行上运行两个命令。这等同于按顺序运行每个命令。

定制您的终端体验可以帮助您提高工作效率。结合 GitKraken CLI 带来的有用特性，如自动完成建议，您将走上效率最大化的道路。

定制您的终端体验可以帮助您提高工作效率。结合 GitKraken CLI 带来的有用特性，如自动完成建议，您将走上效率最大化的道路。

**准备好自动化**

## 既然您已经定制了自己的 CLI shell 用户体验，并且掌握了创建自己的快捷方式的诀窍，那么您就可以开始编写脚本了，我们将在本 CLI 简介系列的下一部分中介绍脚本。我们将把到目前为止您所学的一切结合起来，构建您的第一个简单脚本，并介绍更高级的脚本逻辑。有了这些知识，您将准备好接受高级工作流程并处理 CI/CD 管道！

既然您已经定制了自己的 CLI shell 用户体验，并且掌握了创建自己的快捷方式的诀窍，那么您就可以开始编写脚本了，我们将在本 CLI 简介系列的下一部分中介绍脚本。我们将把到目前为止您所学的一切结合起来，构建您的第一个简单脚本，并介绍更高级的脚本逻辑。有了这些知识，您将准备好接受高级工作流程并处理 CI/CD 管道！