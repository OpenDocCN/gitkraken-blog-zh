# 了解如何使用 Git 添加命令|全部、交互式、撤消

> 原文：<https://www.gitkraken.com/learn/git/git-add>

Git 允许您随着时间的推移拍摄存储库的快照。这些快照中的每一个都被称为 [Git 提交](https://www.gitkraken.com/learn/git/commit)。但是 Git 怎么知道我们要提交什么信息呢？

这就是 Git add 的用武之地。Git add 是一个命令，它允许您转移单个文件，或者一次转移项目目录中的所有文件，为转移它们做准备。Git add 是 Git 中最重要和最基本的命令之一，有很多方法可以使用它。本文将介绍 Git add 如何工作，以及使用该命令的一些可选方法。

“@GitKraken 无疑是我今年发现的最好的工具之一，它显著提高了我作为软件开发人员和作者的效率。”–[@ hflickster](https://twitter.com/hflickster/status/1514431099451187202)

**添加 Git 索引**

## Git add 是一种用于暂存即将提交的文件的机制。您可能会问:“Git 将文件添加到什么地方？”这是一个好问题。在每个 Git repo 内部，都有一个名为`.git`的文件。这个文件是在用 Git init 创建项目时创建的。Git 使用这个文件来跟踪存储库中的所有更改和工作。其中一个文件。git 文件夹包含的内容称为“索引”

Git add 是一种用于暂存即将提交的文件的机制。您可能会问:“Git 将文件添加到什么地方？”这是一个好问题。在每个 Git repo 内部，都有一个名为`.git`的文件。这个文件是在用 Git init 创建项目时创建的。Git 使用这个文件来跟踪存储库中的所有更改和工作。其中一个文件。git 文件夹包含的内容称为“索引”

当运行 Git add 时，Git 将工作目录中修改和保存的文件压缩成二进制大对象，也称为 blobs，并将它们添加到索引文件中。这里的索引文件充当单个 blobs 的临时区域。您可以随意修改索引，直到您准备好通过执行 Git commit 来永久记录项目的状态。

当运行 Git add 时，Git 将工作目录中修改和保存的文件压缩成二进制大对象，也称为 blobs，并将它们添加到索引文件中。这里的索引文件充当单个 blobs 的临时区域。您可以随意修改索引，直到您准备好通过执行 Git commit 来永久记录项目的状态。

您实际上可以打开索引，但您将无法读取存储在那里的绝大多数内容，因为它是以压缩形式存在的，只有文件名仍然清晰可辨。

**去添加全部**

当向索引中添加文件以准备提交这些更改时，您可以选择一次存放一个文件，或者您可以告诉 Git 存放工作目录中已经修改并保存的所有文件。实际上有几种不同的方法可以一次添加所有文件。

提交所有文件，可以使用选项`--all`，或者简称为`-A`。该命令将被结构化:

`git add -A`

## 或者，您可以使用特殊字符`.`(称为“点”)来指定当前目录以及所有子目录要使用此方法暂存所有文件，请使用以下命令:

`git add .`

注意:虽然一次将所有文件添加到索引中很方便，但是要小心不要过度使用这两种方法。如果不小心，您可能会意外添加、提交和 [Git push](https://www.gitkraken.com/learn/git/git-push) 未准备好或从未打算提交给回购的东西。

或者，您可以使用特殊字符`.`(称为“点”)来指定当前目录以及所有子目录要使用此方法暂存所有文件，请使用以下命令:

`git add .`

**Git 添加互动**

在[命令行](https://www.gitkraken.com/cli)上学习 Git 可能很困难，所以 Git 的创建者增加了一个交互模式，你可以用`-i`或`--interactive`调用它。

## 通过在交互模式下运行 Git add，Git 将向您显示一个可能选项的菜单，并让您对每个文件做出决定。这是一种非常安全的工作方式，它可以让你在任何给定的时间内对指数的进出进行精细的控制。要调用交互模式，请使用以下命令:

`git add -i`

Git 添加交互模式的选项包括:

状态–显示有变化的路径

更新–将工作树状态添加到阶段化的变更集中

恢复–将暂存的变更集恢复为原始版本

添加未跟踪文件–将未跟踪文件的内容添加到暂存的变更集中

1.  补丁——挑选大块并有选择地更新
2.  差异–查看标题和索引之间的差异
3.  退出–退出 Git 添加交互模式
4.  帮助–将帮助菜单打印到屏幕上
5.  **放弃去添加**
6.  您可以完全控制索引文件中存放的内容。这意味着您也可以在将内容添加到暂存索引后删除它们，从而有效地撤销 Git 添加。从索引中删除文件有几种方法:一次删除一个文件，或者一次删除索引中的所有文件。

    要从索引中删除单个暂存文件，使用命令:

    `git rm --cached <filename>`
7.  将<filename>替换为要从暂存中删除的文件的名称。

    要同时删除索引中暂存的所有文件，使用

    `git reset HEAD -- <directory-name>`命令</filename>
8.  将<directory-name>替换为您的存储库的目录名。</directory-name>

如果您想要从您正在工作的目录中移除暂存的所有文件，您可以使用快捷键`.`来引用当前目录。

## `git reset HEAD – .`

您可以完全控制索引文件中存放的内容。这意味着您也可以在将内容添加到暂存索引后删除它们，从而有效地撤销 Git 添加。从索引中删除文件有几种方法:一次删除一个文件，或者一次删除索引中的所有文件。

要从索引中删除单个暂存文件，使用命令:

`git rm --cached <filename>`

GitKraken Client 可以让你很容易地看到你的存储库中发生了什么，并随时掌握最新的变化，无论你在索引中添加了多少文件！

将<directory-name>替换为您的存储库的目录名。</directory-name>

**如何在命令行中添加 Git**

在命令行中，您可以 Git 添加您修改和保存的文件，一次一个或者一次全部添加。

要对单个文件执行 Git 添加，使用命令:

`git add <filename>`

用您想要添加的文件名替换<filename>。</filename>

在命令行中，您可以 Git 添加您修改和保存的文件，一次一个或者一次全部添加。

当您在 CLI 中工作时，运行 Git status 来确保操作按预期执行总是一个好主意。

Psst:当你在 [GitKraken 客户端](https://www.gitkraken.com/git-client)中使用终端时，你不需要运行额外的命令来确保动作按预期执行。GitKraken 图形将同时自动更新，如上所示，因此您可以验证执行了哪些操作以及项目历史是如何更新的。

您也可以一次添加多个文件，只需在 Git add 后输入每个文件名。

`git add <filename1> <filename2> <filenameN>`

用您要添加的文件名替换上面编号为<的文件名>条目。

当您在 CLI 中工作时，运行 Git status 来确保操作按预期执行总是一个好主意。

您也可以使用`A`选项将所有修改过的文件一次性添加到工作目录中:

`git add -A`

**如何使用 GitKraken 客户端进行 Git 添加**

使用 GitKraken 客户端，将文件添加到索引非常容易。GitKraken 客户端会一直显示你修改文件的状态，不需要运行任何命令或者点击任何选项。该状态在位于应用程序中央 UI 右侧的[提交面板](https://help.gitkraken.com/gitkraken-client/interface/#commit-panel)中可用。

您也可以使用`A`选项将所有修改过的文件一次性添加到工作目录中:

要将单个文件添加到临时区域(也称为索引),请使用将鼠标悬停在提交面板中的文件名上时会出现的`Stage File`按钮。

您甚至可以通过将鼠标悬停在提交面板的`Stages Files`部分中的文件名上来取消转移文件。

## **如何使用 GitKraken 客户端进行 Git 添加**

使用 GitKraken 客户端，将文件添加到索引非常容易。GitKraken 客户端会一直显示你修改文件的状态，不需要运行任何命令或者点击任何选项。该状态在位于应用程序中央 UI 右侧的[提交面板](https://help.gitkraken.com/gitkraken-client/interface/#commit-panel)中可用。

GitKraken 客户端还允许您使用提交面板中的`Stage all changes`按钮一次添加所有修改的文件。

要将单个文件添加到临时区域(也称为索引),请使用将鼠标悬停在提交面板中的文件名上时会出现的`Stage File`按钮。

**将 GitKraken 客户端添加到您的工作流程中**

GitKraken Client 使得在任何给定的时间查看项目的状态变得非常容易，节省了您试图记住您需要运行什么命令来查看您修改的文件的时间和精力。

GitKraken Client 可以通过更好地可视化提交历史来帮助您控制存储库，无论您处于提交周期的哪个阶段。[今天就下载并开始免费使用 GitKraken 客户端](https://www.gitkraken.com/download)，以确保您充分利用 Git。

GitKraken 客户端还允许您通过提交面板中的`Stage all changes`按钮一次性添加所有修改的文件。

## **将 GitKraken 客户端添加到您的工作流程中**

GitKraken Client 使得在任何给定的时间查看项目的状态变得非常容易，节省了您试图记住您需要运行什么命令来查看您修改的文件的时间和精力。

GitKraken 客户端可以通过更好地可视化提交历史来帮助您控制您的存储库，无论您处于提交周期的哪个阶段。[下载并开始免费使用 GitKraken 客户端](https://www.gitkraken.com/download),确保您充分利用 Git。